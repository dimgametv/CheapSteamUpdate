<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
  <title>Cyber Games Store</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap');
        
        body {
            box-sizing: border-box;
            font-family: 'Rajdhani', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 50%, #000000 100%);
            min-height: 100%;
            overflow-x: hidden;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        ::-webkit-scrollbar {
            display: none;
        }
        
        * {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        html {
            height: 100%;
        }
        
        .cyber-glow {
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1);
        }
        
        .neon-text {
            /* Removed glow effect */
        }
        
        .game-card {
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border: 2px solid #00ffff;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.2);
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 50%, #000000 100%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        

        
        .loading-text {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: #00ffff;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
            margin-bottom: 2rem;
            letter-spacing: 3px;
            animation: pulse 2s infinite;
        }
        
        /* Mobile game category tabs */
        .mobile-game-tabs {
            position: fixed;
            bottom: 80px;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 50%, #000000 100%);
            border-top: 2px solid #00ffff;
            backdrop-filter: blur(10px);
            z-index: 99;
            transform: translateY(0);
            transition: transform 0.3s ease;
            display: none;
        }
        
        .mobile-game-tabs.hidden {
            transform: translateY(100%);
        }
        
        .mobile-game-tabs .tab-button {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.75rem 0.5rem;
            background: transparent;
            border: none;
            color: #888;
            font-size: 0.625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }
        
        .mobile-game-tabs .tab-button.active {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
        }
        
        .mobile-game-tabs .tab-button:not(.active):hover {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.05);
        }
        
        .mobile-game-tabs .tab-icon {
            width: 20px;
            height: 20px;
            margin-bottom: 0.25rem;
            fill: currentColor;
        }

        /* Mobile bottom navigation for main pages */
        .mobile-bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 50%, #000000 100%);
            border-top: 2px solid #00ffff;
            backdrop-filter: blur(10px);
            z-index: 100;
            transform: translateY(0);
            transition: transform 0.3s ease;
            display: none;
        }
        
        .mobile-bottom-nav.hidden {
            transform: translateY(100%);
        }
        
        .mobile-bottom-nav .nav-button {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.75rem 0.5rem;
            background: transparent;
            border: none;
            color: #888;
            font-size: 0.625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }
        
        .mobile-bottom-nav .nav-button.active {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
        }
        
        .mobile-bottom-nav .nav-button:not(.active):hover {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.05);
        }
        
        .mobile-bottom-nav .nav-icon {
            width: 20px;
            height: 20px;
            margin-bottom: 0.25rem;
            fill: currentColor;
        }

        /* Page containers */
        .page-container {
            display: none;
        }
        
        .page-container.active {
            display: block;
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {
            .loading-text {
                font-size: 1.5rem;
                letter-spacing: 2px;
                margin-bottom: 1.5rem;
            }
            
            .loading-bar-container {
                width: 300px;
                height: 6px;
            }
            
            /* Header adjustments */
            .text-3xl {
                font-size: 1.5rem !important;
            }
            
            /* Auth button mobile styles */
            .auth-text {
                display: none !important;
            }
            
            .auth-icon {
                display: block !important;
            }
            
            /* Show mobile navigation */
            .mobile-bottom-nav {
                display: flex !important;
            }
            
            .mobile-game-tabs {
                display: none !important;
            }
            
            /* Show desktop tabs on mobile */
            .page-container.active .desktop-tabs {
                display: flex !important;
            }
            
            /* Add bottom padding to main content */
            main {
                padding-bottom: 80px;
            }
            

            
            /* Game cards text */
            .game-card h3 {
                font-size: 0.75rem !important;
                line-height: 1.2 !important;
            }
            
            .game-card .text-lg {
                font-size: 0.875rem !important;
            }
            
            .game-card .text-xs {
                font-size: 0.625rem !important;
            }
            
            .game-card .text-sm {
                font-size: 0.75rem !important;
            }
            
            /* Cyber buttons */
            .cyber-button {
                padding: 0.75rem 1rem !important;
                font-size: 0.875rem !important;
            }
            
            /* Side menu adjustments */
            .side-menu {
                width: 100vw;
            }
            
            .side-menu .text-2xl {
                font-size: 1.25rem !important;
            }
            
            .side-menu .text-xl {
                font-size: 1rem !important;
            }
            
            /* Modal adjustments */
            .auth-form h2 {
                font-size: 1.5rem !important;
            }
            
            .auth-form input {
                padding: 0.75rem !important;
                font-size: 0.875rem !important;
            }
            
            .auth-form button {
                padding: 0.75rem !important;
                font-size: 1rem !important;
            }
            
            /* Banner height adjustment */
            .banner-slider {
                height: 200px;
            }
            
            /* Grid adjustments for mobile */
            .grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
            }
        }
        
        @media (max-width: 480px) {
            .loading-text {
                font-size: 1.25rem;
                letter-spacing: 1px;
            }
            
            .loading-bar-container {
                width: 250px;
                height: 5px;
            }
            
            .text-3xl {
                font-size: 1.25rem !important;
            }
            
            .tab-button {
                padding: 0.75rem 1rem !important;
                font-size: 0.875rem !important;
            }
            
            .game-card h3 {
                font-size: 0.625rem !important;
            }
            
            .cyber-button {
                padding: 0.75rem 1rem !important;
                font-size: 0.875rem !important;
            }
            
            .banner-slider {
                height: 150px;
            }
            
            .side-menu {
                width: 100vw;
            }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .loading-bar-container {
            width: 400px;
            height: 8px;
            background: rgba(0, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            border: 1px solid #00ffff;
        }
        
        .loading-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff00ff, #00ffff, #ff00ff);
            background-size: 200% 100%;
            border-radius: 4px;
            width: 0%;
            transition: width 0.1s ease;
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        

        
        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
            z-index: 20;
        }
        
        .game-card:hover::before {
            left: 100%;
        }
        
        .game-card:hover {
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.3);
        }
        

        
        .cyber-button {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            border: none;
            color: #000;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-size: 0.875rem;
            padding: 0.75rem 1.5rem;
        }
        
        .cyber-button:hover {
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.6);
        }
        
        .grid-pattern {
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        
        .price-tag {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: #000;
            font-weight: 700;
        }
        
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            color: #00ffff;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #ff00ff, #00ffff);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .side-menu {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 50%, #000000 100%);
            border-right: 2px solid #00ffff;
            transition: left 0.3s ease;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        /* Mobile full screen side menu */
        @media (max-width: 768px) {
            .side-menu {
                left: -100vw;
                width: 100vw;
                border-right: none;
                border-bottom: 2px solid #00ffff;
            }
            
            .side-menu.open {
                left: 0;
            }
        }
        
        .side-menu.open {
            left: 0;
        }
        
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
        }
        
        .menu-overlay.open {
            opacity: 1;
            visibility: visible;
        }
        
        .hamburger {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            padding: 4px;
        }
        
        .hamburger span {
            width: 25px;
            height: 3px;
            background: #00ffff;
            margin: 3px 0;
            transition: 0.3s;
            border-radius: 2px;
        }
        
        .hamburger.active span:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }
        
        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }
        
        .hamburger.active span:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }
        
        .banner-slider {
            position: relative;
            overflow: hidden;
            height: 300px;
            width: 100%;
        }
        
        .banner-slides-container {
            display: flex;
            width: 300%;
            height: 100%;
            transition: transform 1s ease-in-out;
        }
        
        .banner-slide {
            width: 33.333%;
            height: 100%;
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
        }
        
        .banner-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
        }
        
        .banner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(0, 0, 0, 0.6), rgba(0, 255, 255, 0.2));
            z-index: 5;
        }
        
        .tab-button {
            background: transparent;
            color: #888;
            border: none;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            padding: 0.75rem 1.5rem;
        }
        
        .tab-button.active {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            color: #000;
        }
        
        .tab-button:not(.active):hover {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
        }
        
        .tabs-container {
            min-height: 400px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .feature-tab-button {
            background: transparent;
            color: #888;
            border: none;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            padding: 0.75rem 1.5rem;
        }
        
        .feature-tab-button.active {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            color: #000;
        }
        
        .feature-tab-button:not(.active):hover {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
        }
        
        .feature-tabs-container {
            min-height: 400px;
        }
        
        .feature-tab-content {
            display: none;
        }
        
        .feature-tab-content.active {
            display: block;
        }
        
        .game-card {
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border: 2px solid #00ffff;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.2);
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 50%, #000000 100%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        

        
        .loading-text {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: #00ffff;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
            margin-bottom: 2rem;
            letter-spacing: 3px;
            animation: pulse 2s infinite;
        }
        
        /* Mobile game category tabs */
        .mobile-game-tabs {
            position: fixed;
            bottom: 80px;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 50%, #000000 100%);
            border-top: 2px solid #00ffff;
            backdrop-filter: blur(10px);
            z-index: 99;
            transform: translateY(0);
            transition: transform 0.3s ease;
            display: none;
        }
        
        .mobile-game-tabs.hidden {
            transform: translateY(100%);
        }
        
        .mobile-game-tabs .tab-button {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.75rem 0.5rem;
            background: transparent;
            border: none;
            color: #888;
            font-size: 0.625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }
        
        .mobile-game-tabs .tab-button.active {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
        }
        
        .mobile-game-tabs .tab-button:not(.active):hover {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.05);
        }
        
        .mobile-game-tabs .tab-icon {
            width: 20px;
            height: 20px;
            margin-bottom: 0.25rem;
            fill: currentColor;
        }

        /* Mobile bottom navigation for main pages */
        .mobile-bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 50%, #000000 100%);
            border-top: 2px solid #00ffff;
            backdrop-filter: blur(10px);
            z-index: 100;
            transform: translateY(0);
            transition: transform 0.3s ease;
            display: none;
        }
        
        .mobile-bottom-nav.hidden {
            transform: translateY(100%);
        }
        
        .mobile-bottom-nav .nav-button {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.75rem 0.5rem;
            background: transparent;
            border: none;
            color: #888;
            font-size: 0.625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }
        
        .mobile-bottom-nav .nav-button.active {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
        }
        
        .mobile-bottom-nav .nav-button:not(.active):hover {
            color: #00ffff;
            background: rgba(0, 255, 255, 0.05);
        }
        
        .mobile-bottom-nav .nav-icon {
            width: 20px;
            height: 20px;
            margin-bottom: 0.25rem;
            fill: currentColor;
        }

        /* Page containers */
        .page-container {
            display: none;
        }
        
        .page-container.active {
            display: block;
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {
            .loading-text {
                font-size: 1.5rem;
                letter-spacing: 2px;
                margin-bottom: 1.5rem;
            }
            
            .loading-bar-container {
                width: 300px;
                height: 6px;
            }
            
            /* Header adjustments */
            .text-3xl {
                font-size: 1.5rem !important;
            }
            
            /* Auth button mobile styles */
            .auth-text {
                display: none !important;
            }
            
            .auth-icon {
                display: block !important;
            }
            
            /* Show mobile navigation */
            .mobile-bottom-nav {
                display: flex !important;
            }
            
            .mobile-game-tabs {
                display: none !important;
            }
            
            /* Show desktop tabs on mobile */
            .page-container.active .desktop-tabs {
                display: flex !important;
            }
            
            /* Add bottom padding to main content */
            main {
                padding-bottom: 80px;
            }
            

            
            /* Game cards text */
            .game-card h3 {
                font-size: 0.75rem !important;
                line-height: 1.2 !important;
            }
            
            .game-card .text-lg {
                font-size: 0.875rem !important;
            }
            
            .game-card .text-xs {
                font-size: 0.625rem !important;
            }
            
            .game-card .text-sm {
                font-size: 0.75rem !important;
            }
            
            /* Cyber buttons */
            .cyber-button {
                padding: 0.75rem 1rem !important;
                font-size: 0.875rem !important;
            }
            
            /* Side menu adjustments */
            .side-menu {
                width: 100vw;
            }
            
            .side-menu .text-2xl {
                font-size: 1.25rem !important;
            }
            
            .side-menu .text-xl {
                font-size: 1rem !important;
            }
            
            /* Modal adjustments */
            .auth-form h2 {
                font-size: 1.5rem !important;
            }
            
            .auth-form input {
                padding: 0.75rem !important;
                font-size: 0.875rem !important;
            }
            
            .auth-form button {
                padding: 0.75rem !important;
                font-size: 1rem !important;
            }
            
            /* Banner height adjustment */
            .banner-slider {
                height: 200px;
            }
            
            /* Grid adjustments for mobile */
            .grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
            }
        }
        
        @media (max-width: 480px) {
            .loading-text {
                font-size: 1.25rem;
                letter-spacing: 1px;
            }
            
            .loading-bar-container {
                width: 250px;
                height: 5px;
            }
            
            .text-3xl {
                font-size: 1.25rem !important;
            }
            
            .tab-button {
                padding: 0.75rem 1rem !important;
                font-size: 0.875rem !important;
            }
            
            .game-card h3 {
                font-size: 0.625rem !important;
            }
            
            .cyber-button {
                padding: 0.75rem 1rem !important;
                font-size: 0.875rem !important;
            }
            
            .banner-slider {
                height: 150px;
            }
            
            .side-menu {
                width: 100vw;
            }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .loading-bar-container {
            width: 400px;
            height: 8px;
            background: rgba(0, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            border: 1px solid #00ffff;
        }
        
        .loading-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff00ff, #00ffff, #ff00ff);
            background-size: 200% 100%;
            border-radius: 4px;
            width: 0%;
            transition: width 0.1s ease;
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        

        

    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="text-white"><!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay">
   <div class="loading-text">
    PLEASE WAIT...
   </div>
   <div class="loading-bar-container">
    <div class="loading-bar" id="loading-bar"></div>
   </div>
  </div><!-- Menu Overlay -->
  <div class="menu-overlay" id="menu-overlay"></div><!-- Side Menu -->
  <div class="side-menu" id="side-menu">
   <div class="p-6">
    <div class="flex items-center justify-between mb-8">
     <h3 class="text-2xl font-bold font-['Orbitron'] text-cyan-400">MENU</h3><button class="hamburger active" id="close-menu"> <span></span> <span></span> <span></span> </button>
    </div>
    <nav class="space-y-6"><button class="block nav-link text-xl font-semibold text-white hover:text-cyan-400 transition-colors text-left w-full" data-page="home">HOME</button> <button class="block nav-link text-xl font-semibold text-white hover:text-cyan-400 transition-colors text-left w-full" data-page="store">STORE</button> <button class="block nav-link text-xl font-semibold text-white hover:text-cyan-400 transition-colors text-left w-full" data-page="game-fixes">GAME FIXES</button> <button class="block nav-link text-xl font-semibold text-white hover:text-cyan-400 transition-colors text-left w-full" data-page="downloads">DOWNLOADS</button> <button class="block nav-link text-xl font-semibold text-white hover:text-cyan-400 transition-colors text-left w-full" data-page="changelogs">CHANGELOGS</button> <button class="block nav-link text-xl font-semibold text-white hover:text-cyan-400 transition-colors text-left w-full" data-page="account">MY ACCOUNT</button>
     <div class="pt-4 border-t border-cyan-500" id="cart-section"><button class="cyber-button font-['Rajdhani'] w-full mb-3" id="cart-button">Cart (<span id="cart-count">0</span>)</button>
      <div id="cart-items" class="space-y-2 max-h-64 overflow-y-auto"><!-- Cart items will appear here -->
      </div>
     </div>
    </nav>
   </div>
  </div>
  <header class="bg-black bg-opacity-80 backdrop-blur-sm border-b border-cyan-500 sticky top-0 z-50">
   <nav class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between w-full">
     <div class="flex items-center justify-start w-1/3"><button class="hamburger ml-0" id="menu-toggle"> <span></span> <span></span> <span></span> </button>
     </div>
     <div class="flex items-center justify-center w-1/3">
      <div class="text-3xl font-bold font-['Orbitron'] text-cyan-400" id="store-title">
       CHEAPSTEAM
      </div>
     </div>
     <div class="flex items-center justify-end w-1/3"><button class="cyber-button font-['Rajdhani'] mr-0 rounded-lg" id="auth-button"> <span class="auth-text">Login</span> <span class="auth-icon hidden">
        <svg class="w-5 h-5" fill="currentColor" viewbox="0 0 24 24"><path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7.5V9M15 11.5V9.5L21 9V11L15 11.5ZM11 15.5C11 16.3 10.3 17 9.5 17S8 16.3 8 15.5 8.7 14 9.5 14 11 14.7 11 15.5ZM16 15.5C16 16.3 15.3 17 14.5 17S13 16.3 13 15.5 13.7 14 14.5 14 16 14.7 16 15.5ZM12 20.5C12.8 20.5 13.5 19.8 13.5 19S12.8 17.5 12 17.5 10.5 18.2 10.5 19 11.2 20.5 12 20.5Z" />
        </svg></span> </button>
     </div>
    </div>
   </nav>
  </header>
  <main><!-- Home Page -->
   <div class="page-container active" id="home-page"><!-- Sliding Banner Section -->
    <section class="banner-slider">
     <div class="banner-slides-container" id="slides-container">
      <div class="banner-slide" id="slide-1">
      </div>
      <div class="banner-slide" id="slide-2">
      </div>
      <div class="banner-slide" id="slide-3">
      </div>
     </div>
    </section><!-- Tabbed Games Section -->
    <section class="py-6 px-4">
     <div class="max-w-7xl mx-auto"><!-- Desktop Tab Navigation -->
      <div class="desktop-tabs flex justify-center mb-6">
       <div class="flex bg-black bg-opacity-50 border border-cyan-500 rounded-lg overflow-hidden"><button class="tab-button active font-['Orbitron'] font-bold transition-all duration-300" data-tab="featured"> IN-STEAM </button> <button class="tab-button font-['Orbitron'] font-bold transition-all duration-300" data-tab="new-releases"> OTT APPS </button> <button class="tab-button font-['Orbitron'] font-bold transition-all duration-300" data-tab="best-sellers"> NON-STEAM </button>
       </div>
      </div><!-- Search Section -->
      <div class="mb-8">
       <div class="relative"><input type="text" id="home-search" placeholder="Search games..." class="w-full px-4 py-2 bg-black bg-opacity-50 border-2 border-cyan-500 text-white text-base focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50 font-['Rajdhani'] placeholder-gray-400">
        <div id="home-search-suggestions" class="absolute top-full left-0 right-0 bg-black bg-opacity-95 border-2 border-cyan-500 border-t-0 max-h-96 overflow-y-auto z-50 hidden"><!-- Search suggestions will appear here -->
        </div>
       </div>
      </div><!-- Tab Content Container -->
      <div class="tabs-container relative">
       <div class="tab-content active" id="featured-tab">
        <div class="grid grid-cols-2 lg:grid-cols-5 gap-3" id="featured-games-grid" style="padding-left: 2px; padding-right: 2px;"><!-- Featured games will be populated by JavaScript -->
        </div>
       </div>
       <div class="tab-content" id="new-releases-tab">
        <div class="grid grid-cols-2 lg:grid-cols-5 gap-3" id="new-releases-grid" style="padding-left: 2px; padding-right: 2px;"><!-- New releases will be populated by JavaScript -->
        </div>
       </div>
       <div class="tab-content" id="best-sellers-tab">
        <div class="grid grid-cols-2 lg:grid-cols-5 gap-3" id="best-sellers-grid" style="padding-left: 2px; padding-right: 2px;"><!-- Best sellers will be populated by JavaScript -->
        </div>
       </div>
      </div>
     </div>
    </section>
   </div><!-- Store Page -->
   <div class="page-container" id="store-page">
    <section class="py-8 px-4">
     <div class="max-w-7xl mx-auto">
      <div class="text-center mb-8">
       <h1 class="text-4xl font-bold font-['Orbitron'] text-cyan-400 mb-4">GAME STORE</h1>
       <p class="text-xl text-gray-300">Browse our complete collection of cyber games</p>
      </div><!-- Active Giveaways Section -->
      <div class="mb-8">
       <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl font-bold font-['Orbitron'] text-cyan-400">üéÅ ACTIVE GIVEAWAYS</h2>
       </div>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="giveaways-grid"><!-- Only 2 giveaways will be shown here -->
       </div>
      </div><!-- Owned Games Section (only shown when logged in) -->
      <div class="mb-8" id="owned-games-section" style="display: none;">
       <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl font-bold font-['Orbitron'] text-cyan-400">üìö MY GAMES LIBRARY</h2>
       </div>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="owned-games-grid"><!-- Only 2 owned games will be shown here -->
       </div>
      </div><!-- Game Bundles Grid -->
      <div class="mb-6">
       <div class="flex flex-col md:flex-row md:items-center justify-between mb-4">
        <h2 class="text-2xl font-bold font-['Orbitron'] text-cyan-400 mb-4 md:mb-0">GAME BUNDLES</h2>
        <div class="relative w-full md:w-80"><input type="text" id="bundle-search" placeholder="Search bundles..." class="w-full px-4 py-2 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-1 focus:ring-cyan-500 focus:ring-opacity-50 font-['Rajdhani'] placeholder-gray-400">
         <div id="bundle-search-suggestions" class="absolute top-full left-0 right-0 bg-black bg-opacity-95 border border-cyan-500 border-t-0 max-h-64 overflow-y-auto z-50 hidden"><!-- Bundle search suggestions will appear here -->
         </div>
        </div>
       </div>
       <div class="grid grid-cols-2 lg:grid-cols-5 gap-3" id="bundles-grid" style="padding-left: 2px; padding-right: 2px;"><!-- Game bundles will be populated by JavaScript -->
       </div>
      </div>
     </div>
    </section>
   </div><!-- Giveaways Page -->
   <div class="page-container" id="giveaways-page">
    <section class="py-8 px-4">
     <div class="max-w-7xl mx-auto">
      <div class="text-center mb-8">
       <h1 class="text-4xl font-bold font-['Orbitron'] text-cyan-400 mb-4">üéÅ ALL GIVEAWAYS</h1>
       <p class="text-xl text-gray-300">Enter active giveaways and win amazing prizes</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="all-giveaways-grid"><!-- All giveaways will be populated by JavaScript -->
      </div>
     </div>
    </section>
   </div><!-- Library Page -->
   <div class="page-container" id="library-page">
    <section class="py-8 px-4">
     <div class="max-w-7xl mx-auto">
      <div class="text-center mb-8">
       <h1 class="text-4xl font-bold font-['Orbitron'] text-cyan-400 mb-4">üìö MY GAMES LIBRARY</h1>
       <p class="text-xl text-gray-300">Manage and play your owned games</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4" id="all-owned-games-grid"><!-- All owned games will be populated by JavaScript -->
      </div>
     </div>
    </section>
   </div><!-- Downloads Page -->
   <div class="page-container" id="downloads-page">
    <section class="py-8 px-4">
     <div class="max-w-7xl mx-auto">
      <div class="text-center mb-8">
       <h1 class="text-4xl font-bold font-['Orbitron'] text-cyan-400 mb-4">üì± DOWNLOADS</h1>
       <p class="text-xl text-gray-300">Download CheapSteam software for your devices</p>
      </div><!-- Download Cards - Responsive Full Width -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto"><!-- Android App Card -->
       <div class="game-card overflow-hidden relative cursor-pointer">
        <div class="absolute inset-0 bg-gradient-to-br from-green-500 to-green-700 opacity-30"></div>
        <div class="absolute inset-0 bg-black bg-opacity-40"></div><!-- Admin Only Badge -->
        <div class="absolute top-4 right-4 bg-red-600 text-white px-3 py-2 rounded-full text-sm font-bold z-20">
         üîí ADMIN ONLY
        </div>
        <div class="relative z-10 p-8">
         <div class="text-center mb-8">
          <div class="text-6xl mb-4">
           üì±
          </div>
          <h3 class="text-2xl font-bold font-['Orbitron'] text-cyan-400 mb-4">ANDROID APP</h3>
          <p class="text-gray-300 text-lg">Download CheapSteam for Android devices</p>
         </div>
         <div class="bg-black bg-opacity-60 backdrop-blur-sm rounded-lg p-6 mb-6">
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6">
           <div class="text-center"><span class="text-gray-400 text-sm block">Version</span> <span class="text-white font-semibold text-lg">v2.4.1</span>
           </div>
           <div class="text-center"><span class="text-gray-400 text-sm block">Size</span> <span class="text-white font-semibold text-lg">45.2 MB</span>
           </div>
           <div class="text-center"><span class="text-gray-400 text-sm block">Downloads</span> <span class="text-green-400 font-semibold text-lg">2.1M+</span>
           </div>
          </div>
          <div class="space-y-3"><button class="bg-gray-600 text-gray-300 cursor-not-allowed w-full py-3 font-['Rajdhani'] text-lg font-bold rounded" disabled> üîí ADMIN ACCESS REQUIRED </button> <button class="bg-gray-600 text-gray-300 cursor-not-allowed w-full py-3 font-['Rajdhani'] text-lg font-bold rounded" disabled> üîí RESTRICTED ACCESS </button>
          </div>
         </div>
        </div>
       </div><!-- Windows App Card -->
       <div class="game-card overflow-hidden relative cursor-pointer">
        <div class="absolute inset-0 bg-gradient-to-br from-blue-500 to-blue-700 opacity-30"></div>
        <div class="absolute inset-0 bg-black bg-opacity-40"></div>
        <div class="relative z-10 p-8">
         <div class="text-center mb-8">
          <div class="text-6xl mb-4">
           üíª
          </div>
          <h3 class="text-2xl font-bold font-['Orbitron'] text-cyan-400 mb-4">WINDOWS APP</h3>
          <p class="text-gray-300 text-lg">Download CheapSteam for Windows PC</p>
         </div>
         <div class="bg-black bg-opacity-60 backdrop-blur-sm rounded-lg p-6 mb-6">
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6">
           <div class="text-center"><span class="text-gray-400 text-sm block">Version</span> <span class="text-white font-semibold text-lg">v2.4.1</span>
           </div>
           <div class="text-center"><span class="text-gray-400 text-sm block">Size</span> <span class="text-white font-semibold text-lg">128.7 MB</span>
           </div>
           <div class="text-center"><span class="text-gray-400 text-sm block">Downloads</span> <span class="text-blue-400 font-semibold text-lg">1.8M+</span>
           </div>
          </div>
          <div class="space-y-3"><button class="cyber-button w-full py-3 font-['Rajdhani'] text-lg font-bold rounded download-btn" data-platform="windows"> üì• DOWNLOAD EXE </button> <button class="bg-blue-600 hover:bg-blue-700 text-white w-full py-3 font-['Rajdhani'] text-lg font-bold transition-colors rounded microsoft-store-btn"> üè™ MICROSOFT STORE </button>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
    </section>
   </div><!-- Game Fixes Page -->
   <div class="page-container" id="game-fixes-page">
    <section class="py-8 px-4">
     <div class="max-w-7xl mx-auto">
      <div class="text-center mb-8">
       <h1 class="text-4xl font-bold font-['Orbitron'] text-cyan-400 mb-4">üîß GAME FIXES</h1>
       <p class="text-xl text-gray-300">Video tutorials to fix common gaming issues</p>
      </div><!-- Search Section -->
      <div class="mb-8">
       <div class="relative"><input type="text" id="game-fixes-search" placeholder="Search for game fixes, issues, or game names..." class="w-full px-4 py-2 bg-black bg-opacity-50 border-2 border-cyan-500 text-white text-base focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50 font-['Rajdhani'] placeholder-gray-400">
        <div id="game-fixes-search-suggestions" class="absolute top-full left-0 right-0 bg-black bg-opacity-95 border-2 border-cyan-500 border-t-0 max-h-96 overflow-y-auto z-50 hidden"><!-- Search suggestions will appear here -->
        </div>
       </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="game-fixes-grid"><!-- Game fix videos will be populated by JavaScript -->
      </div>
     </div>
    </section>
   </div><!-- Changelogs Page -->
   <div class="page-container" id="changelogs-page">
    <section class="py-8 px-4">
     <div class="max-w-7xl mx-auto">
      <div class="text-center mb-8">
       <h1 class="text-4xl font-bold font-['Orbitron'] text-cyan-400 mb-4">üìã CHANGELOGS</h1>
       <p class="text-xl text-gray-300">Latest updates and improvements to CheapSteam</p>
      </div>
      <div class="space-y-6" id="changelogs-container"><!-- Changelogs will be populated by JavaScript -->
      </div>
     </div>
    </section>
   </div><!-- Account Page -->
   <div class="page-container" id="account-page">
    <section class="py-8 px-4">
     <div class="max-w-7xl mx-auto">
      <div class="text-center mb-8">
       <h1 class="text-4xl font-bold font-['Orbitron'] text-cyan-400 mb-4">MY ACCOUNT</h1>
       <p class="text-xl text-gray-300">Manage your gaming profile</p>
      </div>
      <div id="account-content"><!-- Not logged in state -->
       <div id="account-not-logged-in" class="text-center">
        <div class="game-card p-8 max-w-md mx-auto">
         <div class="text-6xl mb-6">
          üë§
         </div>
         <h3 class="text-2xl font-bold text-cyan-400 mb-4">Sign In Required</h3>
         <p class="text-gray-300 mb-6">Please sign in to access your account features</p><button class="cyber-button font-['Rajdhani']" id="account-login-btn">Sign In</button>
        </div>
       </div><!-- Logged in state -->
       <div id="account-logged-in" class="hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!-- Profile Info -->
         <div class="game-card p-6">
          <h3 class="text-xl font-bold text-cyan-400 mb-4">Profile Information</h3>
          <div class="space-y-3">
           <div><label class="block text-sm text-gray-400">Username</label>
            <p class="text-white font-semibold" id="profile-username">-</p>
           </div>
           <div><label class="block text-sm text-gray-400">Email</label>
            <p class="text-white font-semibold" id="profile-email">-</p>
           </div>
           <div><label class="block text-sm text-gray-400">Steam ID</label>
            <p class="text-white font-semibold" id="profile-steam-id">-</p>
           </div>
           <div><label class="block text-sm text-gray-400">Member Since</label>
            <p class="text-white font-semibold" id="profile-member-since">-</p>
           </div>
          </div>
         </div><!-- Gaming Stats -->
         <div class="game-card p-6">
          <h3 class="text-xl font-bold text-cyan-400 mb-4">Gaming Stats</h3>
          <div class="space-y-3">
           <div class="flex justify-between"><span class="text-gray-400">Games Owned</span> <span class="text-cyan-400 font-bold">12</span>
           </div>
           <div class="flex justify-between"><span class="text-gray-400">Hours Played</span> <span class="text-cyan-400 font-bold">247</span>
           </div>
           <div class="flex justify-between"><span class="text-gray-400">Achievements</span> <span class="text-cyan-400 font-bold">89</span>
           </div>
           <div class="flex justify-between"><span class="text-gray-400">Level</span> <span class="text-cyan-400 font-bold">15</span>
           </div>
          </div>
         </div><!-- Favorite Games -->
         <div class="game-card p-6 md:col-span-2">
          <h3 class="text-xl font-bold text-cyan-400 mb-4">‚≠ê My Favorite Games</h3>
          <div id="user-favorites">
           <p class="text-gray-400 text-center py-4">No favorite games yet. Visit your Library to add favorites!</p>
          </div>
         </div><!-- Participated Giveaways -->
         <div class="game-card p-6 md:col-span-2">
          <h3 class="text-xl font-bold text-cyan-400 mb-4">üéÅ My Giveaway Entries</h3>
          <div id="user-giveaways">
           <p class="text-gray-400 text-center py-4">No giveaway entries yet. Visit the Store to enter giveaways!</p>
          </div>
         </div><!-- Helpful Videos -->
         <div class="game-card p-6 md:col-span-2">
          <h3 class="text-xl font-bold text-cyan-400 mb-4">‚úì Helpful Videos</h3>
          <div id="helpful-videos">
           <p class="text-gray-400 text-center py-4">No videos marked as helpful yet. Visit Game Fixes to mark helpful tutorials!</p>
          </div>
         </div><!-- Saved Videos -->
         <div class="game-card p-6 md:col-span-2">
          <h3 class="text-xl font-bold text-cyan-400 mb-4">üíæ Saved Videos</h3>
          <div id="saved-videos">
           <p class="text-gray-400 text-center py-4">No videos saved yet. Visit Game Fixes to save tutorials for later!</p>
          </div>
         </div><!-- Recent Activity -->
         <div class="game-card p-6 md:col-span-2">
          <h3 class="text-xl font-bold text-cyan-400 mb-4">Recent Activity</h3>
          <div id="recent-activity" class="space-y-3"><!-- Recent activity will be populated by JavaScript -->
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
    </section>
   </div>
  </main><!-- Mobile Game Category Navigation (only visible on home page) -->
  <div class="mobile-game-tabs" id="mobile-game-tabs"><button class="tab-button active" data-tab="featured">
    <svg class="tab-icon" viewbox="0 0 24 24"><path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" />
    </svg><span>FEATURED</span> </button> <button class="tab-button" data-tab="new-releases">
    <svg class="tab-icon" viewbox="0 0 24 24"><path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7.5V9M15 11.5V9.5L21 9V11L15 11.5ZM11 15.5C11 16.3 10.3 17 9.5 17S8 16.3 8 15.5 8.7 14 9.5 14 11 14.7 11 15.5ZM16 15.5C16 16.3 15.3 17 14.5 17S13 16.3 13 15.5 13.7 14 14.5 14 16 14.7 16 15.5ZM12 20.5C12.8 20.5 13.5 19.8 13.5 19S12.8 17.5 12 17.5 10.5 18.2 10.5 19 11.2 20.5 12 20.5Z" />
    </svg><span>NEW</span> </button> <button class="tab-button" data-tab="best-sellers">
    <svg class="tab-icon" viewbox="0 0 24 24"><path d="M16 6L18.29 8.29L13.41 13.17L9.41 9.17L2 16.59L3.41 18L9.41 12L13.41 16L19.71 9.71L22 12V6H16Z" />
    </svg><span>TRENDING</span> </button>
  </div><!-- Mobile Bottom Navigation for Main Pages -->
  <div class="mobile-bottom-nav" id="mobile-bottom-nav"><button class="nav-button active" data-page="home">
    <svg class="nav-icon" viewbox="0 0 24 24"><path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z" />
    </svg><span>HOME</span> </button> <button class="nav-button" data-page="store">
    <svg class="nav-icon" viewbox="0 0 24 24"><path d="M7 18C5.9 18 5 18.9 5 20S5.9 22 7 22 9 21.1 9 20 8.1 18 7 18ZM1 2V4H3L6.6 11.59L5.24 14.04C5.09 14.32 5 14.65 5 15C5 16.1 5.9 17 7 17H19V15H7.42C7.28 15 7.17 14.89 7.17 14.75L7.2 14.63L8.1 13H15.55C16.3 13 16.96 12.58 17.3 11.97L20.88 5H5.21L4.27 3H1ZM17 18C15.9 18 15 18.9 15 20S15.9 22 17 22 19 21.1 19 20 18.1 18 17 18Z" />
    </svg><span>STORE</span> </button> <button class="nav-button" data-page="account">
    <svg class="nav-icon" viewbox="0 0 24 24"><path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" />
    </svg><span>ACCOUNT</span> </button>
  </div><!-- Participation Code Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-50 hidden" id="participation-modal">
   <div class="flex items-center justify-center min-h-full p-4">
    <div class="bg-gradient-to-br from-gray-900 to-black border-2 border-cyan-500 p-8 w-full max-w-md relative cyber-glow"><button class="absolute top-4 right-4 text-cyan-400 hover:text-white text-2xl" id="close-participation-modal">√ó</button>
     <div class="text-center mb-6">
      <h2 class="text-2xl font-bold font-['Orbitron'] text-cyan-400 mb-2">ENTER GIVEAWAY</h2>
      <p class="text-gray-300 text-sm" id="participation-giveaway-name">Giveaway Name</p>
     </div>
     <form id="participation-form">
      <div class="mb-6"><label for="participation-code" class="block text-sm font-semibold text-cyan-300 mb-2">Participation Code</label> <input type="text" id="participation-code" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50 text-center font-mono text-lg" placeholder="Enter code here" required>
       <p class="text-xs text-gray-400 mt-2">Enter the participation code to join this giveaway</p>
      </div>
      <div class="flex space-x-3"><button type="submit" class="cyber-button flex-1 py-3 font-['Rajdhani'] text-lg font-bold"> CONFIRM </button> <button type="button" class="bg-gray-700 hover:bg-gray-600 text-white flex-1 py-3 font-['Rajdhani'] text-lg font-bold transition-colors" id="cancel-participation"> CANCEL </button>
      </div>
     </form>
    </div>
   </div>
  </div><!-- Bundle Details Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-50 hidden" id="bundle-modal">
   <div class="flex items-center justify-center min-h-full p-4">
    <div class="bg-gradient-to-br from-gray-900 to-black border-2 border-cyan-500 p-8 w-full relative cyber-glow max-h-[90vh] overflow-y-auto"><button class="absolute top-4 right-4 text-cyan-400 hover:text-white text-2xl" id="close-bundle-modal">√ó</button>
     <div id="bundle-content"><!-- Bundle details will be populated here -->
     </div>
    </div>
   </div>
  </div><!-- Game Settings Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-50 hidden" id="game-settings-modal">
   <div class="flex items-center justify-center min-h-full p-4">
    <div class="bg-gradient-to-br from-gray-900 to-black border-2 border-cyan-500 p-8 w-full max-w-md relative cyber-glow"><button class="absolute top-4 right-4 text-cyan-400 hover:text-white text-2xl" id="close-game-settings-modal">√ó</button>
     <div class="text-center mb-6">
      <h2 class="text-2xl font-bold font-['Orbitron'] text-cyan-400 mb-2">GAME SETTINGS</h2>
      <p class="text-gray-300 text-sm" id="settings-game-name">Game Name</p>
     </div>
     <div class="space-y-4"><button class="w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-['Rajdhani'] text-lg font-bold transition-colors flex items-center justify-center space-x-2" id="replace-game-btn"> <span>üîÑ</span> <span>REPLACE</span> </button> <button class="w-full py-3 px-4 bg-yellow-600 hover:bg-yellow-700 text-white font-['Rajdhani'] text-lg font-bold transition-colors flex items-center justify-center space-x-2" id="repair-game-btn"> <span>üîß</span> <span>REPAIR</span> </button> <button class="w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white font-['Rajdhani'] text-lg font-bold transition-colors flex items-center justify-center space-x-2" id="uninstall-game-btn"> <span>üóëÔ∏è</span> <span>UNINSTALL</span> </button> <button class="w-full py-3 px-4 bg-gray-700 hover:bg-gray-600 text-white font-['Rajdhani'] text-lg font-bold transition-colors" id="cancel-settings"> CANCEL </button>
     </div>
    </div>
   </div>
  </div><!-- Payment Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-50 hidden" id="payment-modal">
   <div class="flex items-center justify-center min-h-full p-4">
    <div class="bg-gradient-to-br from-gray-900 to-black border-2 border-cyan-500 p-8 w-full max-w-4xl relative cyber-glow max-h-[90vh] overflow-y-auto"><button class="absolute top-4 right-4 text-cyan-400 hover:text-white text-2xl" id="close-payment-modal">√ó</button>
     <div class="text-center mb-8">
      <h2 class="text-3xl font-bold font-['Orbitron'] text-cyan-400 mb-2">SECURE CHECKOUT</h2>
      <p class="text-gray-300">Complete your purchase securely</p>
     </div>
     <div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><!-- Order Summary -->
      <div class="order-1 lg:order-2">
       <div class="game-card p-6">
        <h3 class="text-xl font-bold text-cyan-400 mb-4">üìã Order Summary</h3>
        <div id="checkout-items" class="space-y-3 mb-4"><!-- Checkout items will appear here -->
        </div>
        <div class="border-t border-gray-600 pt-4">
         <div class="flex justify-between items-center text-lg font-bold"><span class="text-white">Total:</span> <span class="text-green-400" id="checkout-total">$0.00</span>
         </div>
        </div>
       </div>
      </div><!-- Payment Form -->
      <div class="order-2 lg:order-1">
       <form id="payment-form" class="space-y-6"><!-- Payment Method -->
        <div class="game-card p-6">
         <h3 class="text-lg font-bold text-cyan-400 mb-4">üí≥ Payment Method</h3>
         <div class="space-y-3 mb-4"><label class="flex items-center space-x-3 cursor-pointer"> <input type="radio" name="payment-method" value="credit-card" class="text-cyan-500 focus:ring-cyan-500" checked> <span class="text-white font-semibold">üí≥ Credit/Debit Card</span> </label> <label class="flex items-center space-x-3 cursor-pointer"> <input type="radio" name="payment-method" value="paypal" class="text-cyan-500 focus:ring-cyan-500"> <span class="text-white font-semibold">üÖøÔ∏è PayPal</span> </label> <label class="flex items-center space-x-3 cursor-pointer"> <input type="radio" name="payment-method" value="crypto" class="text-cyan-500 focus:ring-cyan-500"> <span class="text-white font-semibold">‚Çø Cryptocurrency</span> </label>
         </div><!-- Card Details (shown by default) -->
         <div id="card-details">
          <div class="space-y-4">
           <div><label for="card-number" class="block text-sm font-semibold text-cyan-300 mb-2">Card Number</label> <input type="text" id="card-number" name="cardNumber" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50 font-mono" placeholder="1234 5678 9012 3456" maxlength="19">
           </div>
           <div class="grid grid-cols-2 gap-4">
            <div><label for="expiry-date" class="block text-sm font-semibold text-cyan-300 mb-2">Expiry Date</label> <input type="text" id="expiry-date" name="expiryDate" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50 font-mono" placeholder="MM/YY" maxlength="5">
            </div>
            <div><label for="cvv" class="block text-sm font-semibold text-cyan-300 mb-2">CVV</label> <input type="text" id="cvv" name="cvv" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50 font-mono" placeholder="123" maxlength="4">
            </div>
           </div>
          </div>
         </div>
         <div class="mt-6"><label class="flex items-start space-x-3 cursor-pointer"> <input type="checkbox" id="terms" name="terms" class="mt-1 text-cyan-500 focus:ring-cyan-500" required> <span class="text-sm text-gray-300"> I agree to the <span class="text-cyan-400 underline">Terms of Service</span> and <span class="text-cyan-400 underline">Privacy Policy</span>. I understand that digital purchases are non-refundable. </span> </label>
         </div>
         <div class="flex space-x-4 mt-6"><button type="submit" class="cyber-button flex-1 py-4 font-['Rajdhani'] text-lg font-bold" id="complete-purchase-btn"> üîí COMPLETE PURCHASE </button> <button type="button" class="bg-gray-700 hover:bg-gray-600 text-white px-6 py-4 font-['Rajdhani'] text-lg font-bold transition-colors" id="cancel-payment"> CANCEL </button>
         </div>
         <div class="mt-4 text-center">
          <p class="text-xs text-gray-400">üîí Your payment information is encrypted and secure</p>
         </div>
        </div>
       </form>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Video Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-50 hidden" id="video-modal">
   <div class="flex items-center justify-center min-h-full p-4">
    <div class="bg-gradient-to-br from-gray-900 to-black border-2 border-cyan-500 p-8 w-full relative cyber-glow max-h-[90vh] overflow-y-auto"><button class="absolute top-4 right-4 text-cyan-400 hover:text-white text-2xl" id="close-video-modal">√ó</button>
     <div id="video-content"><!-- Video content will be populated here -->
     </div>
    </div>
   </div>
  </div><!-- Login/Signup Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-50 hidden" id="auth-modal">
   <div class="flex items-center justify-center min-h-full p-4">
    <div class="bg-gradient-to-br from-gray-900 to-black border-2 border-cyan-500 p-8 w-full max-w-md relative cyber-glow"><button class="absolute top-4 right-4 text-cyan-400 hover:text-white text-2xl" id="close-auth-modal">√ó</button> <!-- Login Form -->
     <div id="login-form" class="auth-form">
      <h2 class="text-3xl font-bold font-['Orbitron'] text-cyan-400 mb-6 text-center">LOGIN</h2>
      <form id="login-form-element">
       <div class="mb-4"><label for="login-email" class="block text-sm font-semibold text-cyan-300 mb-2">Email</label> <input type="email" id="login-email" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50" placeholder="Enter your email" required>
       </div>
       <div class="mb-6"><label for="login-password" class="block text-sm font-semibold text-cyan-300 mb-2">Password</label> <input type="password" id="login-password" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50" placeholder="Enter your password" required>
       </div><button type="submit" class="cyber-button w-full py-3 font-['Rajdhani'] text-lg font-bold mb-4"> LOGIN </button>
      </form>
      <p class="text-center text-gray-400">Don't have an account? <button class="text-cyan-400 hover:text-cyan-300 font-semibold" id="show-signup">Sign Up</button></p>
     </div><!-- Signup Form -->
     <div id="signup-form" class="auth-form hidden">
      <h2 class="text-3xl font-bold font-['Orbitron'] text-cyan-400 mb-6 text-center">SIGN UP</h2>
      <form id="signup-form-element">
       <div class="mb-4"><label for="signup-username" class="block text-sm font-semibold text-cyan-300 mb-2">Username</label> <input type="text" id="signup-username" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50" placeholder="Choose a username" required>
       </div>
       <div class="mb-4"><label for="signup-email" class="block text-sm font-semibold text-cyan-300 mb-2">Email</label> <input type="email" id="signup-email" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50" placeholder="Enter your email" required>
       </div>
       <div class="mb-6"><label for="signup-password" class="block text-sm font-semibold text-cyan-300 mb-2">Password</label> <input type="password" id="signup-password" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-cyan-500 text-white focus:outline-none focus:border-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50" placeholder="Create a password" required>
       </div><button type="submit" class="cyber-button w-full py-3 font-['Rajdhani'] text-lg font-bold mb-4"> SIGN UP </button>
      </form>
      <p class="text-center text-gray-400">Already have an account? <button class="text-cyan-400 hover:text-cyan-300 font-semibold" id="show-login">Login</button></p>
     </div>
    </div>
   </div>
  </div>
  <script>
        // Random gaming poster backgrounds
        const gamingPosters = [
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='330' viewBox='0 0 220 330'%3E%3Cdefs%3E%3ClinearGradient id='poster1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ff6b35;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23f7931e;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='220' height='330' fill='url(%23poster1)'/%3E%3Cpath d='M20 50 L200 50 L190 80 L30 80 Z' fill='%23000' opacity='0.3'/%3E%3Ccircle cx='110' cy='165' r='40' fill='%23000' opacity='0.2'/%3E%3Cpolygon points='110,120 90,200 130,200' fill='%23fff' opacity='0.8'/%3E%3C/svg%3E",
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='330' viewBox='0 0 220 330'%3E%3Cdefs%3E%3ClinearGradient id='poster2' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ff00ff;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2300ffff;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='220' height='330' fill='url(%23poster2)'/%3E%3Crect x='40' y='60' width='140' height='80' fill='%23000' opacity='0.4'/%3E%3Cpath d='M60 200 Q110 180 160 200 L160 250 Q110 270 60 250 Z' fill='%23fff' opacity='0.7'/%3E%3C/svg%3E",
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='330' viewBox='0 0 220 330'%3E%3Cdefs%3E%3ClinearGradient id='poster3' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23001100;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2300ff00;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='220' height='330' fill='url(%23poster3)'/%3E%3Crect x='30' y='40' width='160' height='100' fill='%23000' opacity='0.3'/%3E%3Ccircle cx='110' cy='200' r='30' fill='%23000' opacity='0.5'/%3E%3Crect x='95' y='185' width='30' height='30' fill='%23fff'/%3E%3C/svg%3E",
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='330' viewBox='0 0 220 330'%3E%3Cdefs%3E%3ClinearGradient id='poster4' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23330066;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23000033;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='220' height='330' fill='url(%23poster4)'/%3E%3Cpolygon points='110,50 70,120 150,120' fill='%23fff' opacity='0.6'/%3E%3Crect x='50' y='180' width='120' height='60' fill='%23000' opacity='0.4'/%3E%3Ccircle cx='110' cy='280' r='20' fill='%2300ffff'/%3E%3C/svg%3E",
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='330' viewBox='0 0 220 330'%3E%3Cdefs%3E%3ClinearGradient id='poster5' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ff0080;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23000000;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2300ffff;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='220' height='330' fill='url(%23poster5)'/%3E%3Cpath d='M40 80 L180 80 L160 140 L60 140 Z' fill='%23fff' opacity='0.7'/%3E%3Ccircle cx='110' cy='200' r='35' fill='%23000' opacity='0.3'/%3E%3Crect x='100' y='190' width='20' height='20' fill='%23fff' transform='rotate(45 110 200)'/%3E%3C/svg%3E",
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='330' viewBox='0 0 220 330'%3E%3Cdefs%3E%3ClinearGradient id='poster6' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23000000;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23ff0080;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23000000;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='220' height='330' fill='url(%23poster6)'/%3E%3Cpolygon points='110,60 80,100 140,100' fill='%2300ffff'/%3E%3Crect x='70' y='150' width='80' height='80' fill='%23000' opacity='0.4'/%3E%3Ccircle cx='110' cy='270' r='25' fill='%23fff' opacity='0.8'/%3E%3C/svg%3E",
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='330' viewBox='0 0 220 330'%3E%3Cdefs%3E%3ClinearGradient id='poster7' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23660033;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23330066;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='220' height='330' fill='url(%23poster7)'/%3E%3Cpath d='M50 70 L170 70 L150 110 L70 110 Z' fill='%23ff00ff' opacity='0.6'/%3E%3Ccircle cx='110' cy='180' r='45' fill='%23000' opacity='0.3'/%3E%3Cpolygon points='110,150 90,210 130,210' fill='%2300ffff'/%3E%3C/svg%3E",
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='330' viewBox='0 0 220 330'%3E%3Cdefs%3E%3ClinearGradient id='poster8' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23003366;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23006633;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='220' height='330' fill='url(%23poster8)'/%3E%3Crect x='60' y='50' width='100' height='100' fill='%23000' opacity='0.4'/%3E%3Ccircle cx='110' cy='200' r='40' fill='%23fff' opacity='0.7'/%3E%3Crect x='95' y='280' width='30' height='30' fill='%23ff00ff'/%3E%3C/svg%3E"
        ];

        // Featured Games data
        const featuredGames = [
            {
                title: "Neon Runner 2077",
                price: "$59.99",
                originalPrice: "$79.99",
                discount: "25% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                stock: "In Stock",
                image: "images/img2.png"
            },
            {
                title: "Cyber Warfare Elite",
                price: "$49.99",
                originalPrice: "$69.99",
                discount: "30% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                stock: "Out of Stock",
                image: "images/img1.png"
            },
            {
                title: "Matrix Hacker",
                price: "$39.99",
                originalPrice: "",
                discount: "NEW",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                stock: "In Stock",
                image: "images/img1.png"
            },
            {
                title: "Synthwave City",
                price: "$44.99",
                originalPrice: "$54.99",
                discount: "18% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                stock: "In Stock",
                image: "images/img1.png"
            },
            {
                title: "Digital Ghost",
                price: "$34.99",
                originalPrice: "$49.99",
                discount: "30% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                stock: "Out of Stock",
                image: "images/img1.png"
            }
        ];

        // New Releases data
        const newReleases = [
            {
                title: "Quantum Breach",
                price: "$69.99",
                originalPrice: "",
                discount: "NEW",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                stock: "In Stock",
                image: "images/img1.png"
            },
            {
                title: "Neural Network",
                price: "$54.99",
                originalPrice: "",
                discount: "NEW",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                stock: "In Stock",
                image: "images/img1.png"
            },
            {
                title: "Code Assassin",
                price: "$49.99",
                originalPrice: "",
                discount: "NEW",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                stock: "Out of Stock",
                image: "images/img1.png"
            },
            {
                title: "Virtual Reality X",
                price: "$64.99",
                originalPrice: "",
                discount: "NEW",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                stock: "In Stock",
                image: "images/img1.png"
            },
            {
                title: "Cyber Protocol",
                price: "$59.99",
                originalPrice: "",
                discount: "NEW",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                stock: "Out of Stock",
                image: "images/img1.png"
            }
        ];

        // Best Sellers data
        const bestSellers = [
            {
                title: "Pixel Warrior",
                price: "$29.99",
                originalPrice: "$39.99",
                discount: "25% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                stock: "In Stock",
                image: "images/img1.png"
            },
            {
                title: "Space Invader Pro",
                price: "$24.99",
                originalPrice: "$34.99",
                discount: "29% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                stock: "In Stock",
                image: "images/img1.png"
            },
            {
                title: "Retro Fighter",
                price: "$19.99",
                originalPrice: "$29.99",
                discount: "33% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                stock: "Out of Stock",
                image: "images/img1.png"
            },
            {
                title: "Neon Arcade",
                price: "$34.99",
                originalPrice: "$44.99",
                discount: "22% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                stock: "In Stock",
                image: "images/img1.png"
            },
            {
                title: "Cyber Classic",
                price: "$27.99",
                originalPrice: "$39.99",
                discount: "30% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                stock: "Out of Stock",
                image: "images/img1.png"
            }
        ];

        // Default configuration
        const defaultConfig = {
            store_title: "CHEAPSTEAM",
            hero_tagline: "ENTER THE MATRIX",
            featured_section_title: "FEATURED GAMES"
        };

        // All games combined for search functionality
        const allSearchableGames = [...featuredGames, ...newReleases, ...bestSellers];

        // Shopping cart functionality
        let cart = [];
        let cartTotal = 0;
        let orderHistory = [];
        
        // Favorites system
        let favoriteGames = [];
        let currentGameSettings = null;

        function addToCart(game) {
            // Check if game is already in cart
            const existingItem = cart.find(item => item.title === game.title);
            if (existingItem) {
                showNotification('Item already in cart!', 'info');
                return;
            }

            // Add unique ID for cart management
            const cartItem = {
                ...game,
                cartId: Date.now() + Math.random()
            };

            cart.push(cartItem);
            updateCartDisplay();
            updateGameCardButtons(); // Update button states
            showNotification(`${game.title} added to cart!`, 'success');
        }

        function removeFromCart(cartId) {
            cart = cart.filter(item => item.cartId !== cartId);
            updateCartDisplay();
            updateGameCardButtons(); // Update button states
            showNotification('Item removed from cart!', 'info');
        }

        // Function to update game card button states
        function updateGameCardButtons() {
            // Update all BUY NOW buttons on the page
            document.querySelectorAll('.buy-now-btn').forEach(button => {
                try {
                    const gameData = JSON.parse(button.getAttribute('data-game'));
                    const isInCart = cart.some(item => item.title === gameData.title);
                    
                    if (isInCart) {
                        button.textContent = 'ADDED IN CART';
                        button.classList.remove('cyber-button');
                        button.classList.add('bg-gray-600', 'text-gray-300', 'cursor-not-allowed');
                        button.disabled = true;
                    } else {
                        button.textContent = 'BUY NOW';
                        button.classList.add('cyber-button');
                        button.classList.remove('bg-gray-600', 'text-gray-300', 'cursor-not-allowed');
                        button.disabled = false;
                    }
                } catch (error) {
                    console.error('Error updating button state:', error);
                }
            });
        }

        function updateCartDisplay() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            
            cartCount.textContent = cart.length;
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-gray-400 text-sm text-center py-2">Cart is empty</p>';
                cartTotal = 0;
                return;
            }
            
            cartTotal = cart.reduce((total, item) => {
                const price = parseFloat(item.price.replace('$', ''));
                return total + price;
            }, 0);
            
            cartItems.innerHTML = cart.map(item => `
                <div class="bg-black bg-opacity-30 p-3 rounded border border-gray-700">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h4 class="text-white font-semibold text-sm">${item.title}</h4>
                            <p class="text-green-400 font-bold text-sm">${item.price}</p>
                        </div>
                        <button class="text-red-400 hover:text-red-300 ml-2 remove-cart-item" data-item-id="${item.cartId}">√ó</button>
                    </div>
                </div>
            `).join('');
        }

        function showPaymentModal() {
            closeSideMenu(); // Close side menu first
            updateCheckoutModal(); // Update modal content
            
            const paymentModal = document.getElementById('payment-modal');
            paymentModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function updateCheckoutModal() {
            const checkoutItems = document.getElementById('checkout-items');
            const checkoutTotal = document.getElementById('checkout-total');
            
            // Recalculate cart total
            cartTotal = cart.reduce((total, item) => {
                const price = parseFloat(item.price.replace('$', ''));
                return total + price;
            }, 0);
            
            if (cart.length === 0) {
                checkoutItems.innerHTML = '<p class="text-gray-400 text-center py-4">Your cart is empty</p>';
                checkoutTotal.textContent = '$0.00';
                return;
            }
            
            // Populate checkout items
            checkoutItems.innerHTML = cart.map(item => `
                <div class="flex justify-between items-center py-2 border-b border-gray-700">
                    <div class="flex-1">
                        <h4 class="text-white font-semibold text-sm">${item.title}</h4>
                        <p class="text-gray-400 text-xs">${item.rating}</p>
                    </div>
                    <div class="text-right ml-3">
                        <p class="text-green-400 font-bold text-sm">${item.price}</p>
                        ${item.originalPrice ? `<p class="text-gray-400 line-through text-xs">${item.originalPrice}</p>` : ''}
                        <button class="text-red-400 hover:text-red-300 text-xs mt-1 remove-cart-item" data-item-id="${item.cartId}">Remove</button>
                    </div>
                </div>
            `).join('');
            
            checkoutTotal.textContent = `$${cartTotal.toFixed(2)}`;
        }

        // Favorites management functions
        function addToFavorites(game) {
            // Check if game is already in favorites
            const existingFavorite = favoriteGames.find(fav => fav.title === game.title);
            if (existingFavorite) {
                showNotification('Game already in favorites!', 'info');
                return;
            }

            // Add to favorites with additional info
            const favoriteGame = {
                title: game.title,
                dateAdded: new Date().toLocaleDateString(),
                hoursPlayed: game.hoursPlayed || 0,
                achievements: game.achievements || 0,
                totalAchievements: game.totalAchievements || 0
            };

            favoriteGames.push(favoriteGame);
            showNotification(`${game.title} added to favorites!`, 'success');
            
            // Re-render owned games to update button states
            renderOwnedGames();
            if (currentPage === 'library') {
                renderAllOwnedGames();
            }
            
            // Update account page if currently viewing it
            if (currentPage === 'account') {
                updateAccountPage();
            }
        }

        function removeFromFavorites(gameTitle) {
            favoriteGames = favoriteGames.filter(fav => fav.title !== gameTitle);
            showNotification(`${gameTitle} removed from favorites!`, 'info');
            
            // Re-render owned games to update button states
            renderOwnedGames();
            if (currentPage === 'library') {
                renderAllOwnedGames();
            }
            
            // Update account page if currently viewing it
            if (currentPage === 'account') {
                updateAccountPage();
            }
        }

        // Game settings modal functions
        function showGameSettingsModal(game) {
            const gameSettingsModal = document.getElementById('game-settings-modal');
            const gameNameElement = document.getElementById('settings-game-name');
            
            currentGameSettings = game;
            gameNameElement.textContent = game.title;
            
            gameSettingsModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideGameSettingsModal() {
            const gameSettingsModal = document.getElementById('game-settings-modal');
            gameSettingsModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
            currentGameSettings = null;
        }

        function handleGameAction(action) {
            if (!currentGameSettings) return;
            
            const gameName = currentGameSettings.title;
            let message = '';
            
            switch (action) {
                case 'replace':
                    message = `${gameName} is being replaced. This may take a few minutes.`;
                    break;
                case 'repair':
                    message = `${gameName} files are being repaired. Please wait...`;
                    break;
                case 'uninstall':
                    message = `${gameName} has been uninstalled successfully.`;
                    // Update the game status in ownedGames array
                    const gameIndex = ownedGames.findIndex(g => g.title === gameName);
                    if (gameIndex !== -1) {
                        ownedGames[gameIndex].status = 'Not Installed';
                    }
                    // Re-render owned games to show updated status
                    renderOwnedGames();
                    if (currentPage === 'library') {
                        renderAllOwnedGames();
                    }
                    break;
            }
            
            hideGameSettingsModal();
            showNotification(message, 'success');
        }

        function hidePaymentPage() {
            const paymentModal = document.getElementById('payment-modal');
            paymentModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            // Clear form
            document.getElementById('payment-form').reset();
        }

        function processPayment(paymentData) {
            // Show loading state
            const submitBtn = document.getElementById('complete-purchase-btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'üîÑ PROCESSING...';
            submitBtn.disabled = true;
            
            // Simulate payment processing
            setTimeout(() => {
                // Add to order history
                const orderTotal = cart.reduce((total, item) => {
                    const price = parseFloat(item.price.replace('$', ''));
                    return total + price;
                }, 0);
                
                const order = {
                    id: 'ORD-' + Date.now(),
                    date: new Date().toLocaleDateString(),
                    items: [...cart],
                    total: orderTotal,
                    paymentMethod: paymentData.paymentMethod || 'Credit Card'
                };
                
                orderHistory.unshift(order);
                
                // Add games to owned games (simulate purchase)
                cart.forEach(game => {
                    const ownedGame = {
                        title: game.title,
                        purchaseDate: new Date().toISOString().split('T')[0],
                        hoursPlayed: 0,
                        lastPlayed: 'Never',
                        achievements: 0,
                        totalAchievements: Math.floor(Math.random() * 30) + 10,
                        status: 'Not Installed'
                    };
                    ownedGames.unshift(ownedGame);
                });
                
                // Clear cart
                cart = [];
                updateCartDisplay();
                updateGameCardButtons(); // Reset button states
                
                // Hide payment modal
                hidePaymentPage();
                
                // Show success message
                showNotification('üéâ Purchase successful! Games added to your library!', 'success');
                
                // Reset button
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                
                // Re-render owned games sections
                renderOwnedGames();
                if (currentPage === 'library') {
                    renderAllOwnedGames();
                }
                
                // Update account page if currently viewing it
                if (currentPage === 'account') {
                    updateAccountPage();
                }
            }, 2000);
        }



        // Search functionality for home page
        function initHomeSearch() {
            const searchInput = document.getElementById('home-search');
            const suggestionsContainer = document.getElementById('home-search-suggestions');
            
            if (!searchInput || !suggestionsContainer) return;
            
            searchInput.addEventListener('input', function() {
                const query = this.value.trim().toLowerCase();
                
                if (query.length === 0) {
                    suggestionsContainer.classList.add('hidden');
                    return;
                }
                
                const filteredGames = allSearchableGames.filter(game => 
                    game.title.toLowerCase().includes(query)
                ).slice(0, 8);
                
                if (filteredGames.length === 0) {
                    suggestionsContainer.innerHTML = '<div class="p-4 text-gray-400 text-center">No games found</div>';
                    suggestionsContainer.classList.remove('hidden');
                    return;
                }
                
                suggestionsContainer.innerHTML = filteredGames.map(game => `
                    <div class="p-4 hover:bg-cyan-500 hover:bg-opacity-20 cursor-pointer border-b border-gray-700 last:border-b-0 search-suggestion" data-game="${game.title}">
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="text-white font-semibold">${game.title}</h4>
                                <div class="text-yellow-400 text-sm">${game.rating}</div>
                            </div>
                            <div class="text-right">
                                <div class="text-green-400 font-bold">${game.price}</div>
                                ${game.originalPrice ? `<div class="text-gray-400 line-through text-sm">${game.originalPrice}</div>` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
                
                suggestionsContainer.classList.remove('hidden');
            });
            
            // Hide suggestions when clicking outside
            document.addEventListener('click', function(e) {
                if (!searchInput.contains(e.target) && !suggestionsContainer.contains(e.target)) {
                    suggestionsContainer.classList.add('hidden');
                }
            });
            
            // Handle suggestion clicks
            suggestionsContainer.addEventListener('click', function(e) {
                const suggestion = e.target.closest('.search-suggestion');
                if (suggestion) {
                    const gameName = suggestion.getAttribute('data-game');
                    searchInput.value = gameName;
                    suggestionsContainer.classList.add('hidden');
                }
            });
        }

        // Search functionality for bundle search
        function initBundleSearch() {
            const bundleSearchInput = document.getElementById('bundle-search');
            const bundleSuggestionsContainer = document.getElementById('bundle-search-suggestions');
            const bundlesGrid = document.getElementById('bundles-grid');
            
            if (!bundleSearchInput || !bundlesGrid) return;
            
            bundleSearchInput.addEventListener('input', function() {
                const query = this.value.trim().toLowerCase();
                
                if (query.length === 0) {
                    if (bundleSuggestionsContainer) bundleSuggestionsContainer.classList.add('hidden');
                    // Show all bundles
                    renderBundles(gameBundles);
                    return;
                }
                
                const filteredBundles = gameBundles.filter(bundle => 
                    bundle.title.toLowerCase().includes(query) ||
                    bundle.games.some(game => game.toLowerCase().includes(query))
                );
                
                // Update grid with filtered results
                renderBundles(filteredBundles);
                
                // Show suggestions if container exists
                if (bundleSuggestionsContainer) {
                    if (filteredBundles.length === 0) {
                        bundleSuggestionsContainer.innerHTML = '<div class="p-3 text-gray-400 text-center">No bundles found</div>';
                        bundleSuggestionsContainer.classList.remove('hidden');
                        return;
                    }
                    
                    bundleSuggestionsContainer.innerHTML = filteredBundles.map(bundle => `
                        <div class="p-3 hover:bg-cyan-500 hover:bg-opacity-20 cursor-pointer border-b border-gray-700 last:border-b-0 bundle-suggestion" data-bundle="${bundle.title}">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="text-white font-semibold text-sm">${bundle.title}</h4>
                                    <div class="text-gray-400 text-xs">${bundle.games.length} games included</div>
                                </div>
                                <div class="text-green-400 font-bold text-sm">${bundle.price}</div>
                            </div>
                        </div>
                    `).join('');
                    
                    bundleSuggestionsContainer.classList.remove('hidden');
                }
            });
            
            // Hide suggestions when clicking outside
            if (bundleSuggestionsContainer) {
                document.addEventListener('click', function(e) {
                    if (!bundleSearchInput.contains(e.target) && !bundleSuggestionsContainer.contains(e.target)) {
                        bundleSuggestionsContainer.classList.add('hidden');
                    }
                });
                
                // Handle suggestion clicks
                bundleSuggestionsContainer.addEventListener('click', function(e) {
                    const suggestion = e.target.closest('.bundle-suggestion');
                    if (suggestion) {
                        const bundleName = suggestion.getAttribute('data-bundle');
                        bundleSearchInput.value = bundleName;
                        bundleSuggestionsContainer.classList.add('hidden');
                    }
                });
            }
        }

        // Search functionality for game fixes
        function initGameFixesSearch() {
            const gameFixesSearchInput = document.getElementById('game-fixes-search');
            const gameFixesSuggestionsContainer = document.getElementById('game-fixes-search-suggestions');
            const gameFixesGrid = document.getElementById('game-fixes-grid');
            
            if (!gameFixesSearchInput || !gameFixesGrid) return;
            
            gameFixesSearchInput.addEventListener('input', function() {
                const query = this.value.trim().toLowerCase();
                
                if (query.length === 0) {
                    if (gameFixesSuggestionsContainer) gameFixesSuggestionsContainer.classList.add('hidden');
                    // Show all videos
                    renderGameFixVideos(gameFixVideos);
                    return;
                }
                
                const filteredVideos = gameFixVideos.filter(video => 
                    video.title.toLowerCase().includes(query) ||
                    video.game.toLowerCase().includes(query) ||
                    video.issue.toLowerCase().includes(query) ||
                    video.description.toLowerCase().includes(query) ||
                    video.solution.toLowerCase().includes(query)
                );
                
                // Update grid with filtered results
                renderGameFixVideos(filteredVideos);
                
                // Show suggestions if container exists
                if (gameFixesSuggestionsContainer) {
                    if (filteredVideos.length === 0) {
                        gameFixesSuggestionsContainer.innerHTML = '<div class="p-4 text-gray-400 text-center">No fix videos found</div>';
                        gameFixesSuggestionsContainer.classList.remove('hidden');
                        return;
                    }
                    
                    gameFixesSuggestionsContainer.innerHTML = filteredVideos.map(video => `
                        <div class="p-4 hover:bg-cyan-500 hover:bg-opacity-20 cursor-pointer border-b border-gray-700 last:border-b-0 video-suggestion" data-video="${video.title}">
                            <div class="flex justify-between items-center">
                                <div class="flex-1">
                                    <h4 class="text-white font-semibold">${video.title}</h4>
                                    <div class="text-cyan-400 text-sm font-semibold">${video.game}</div>
                                    <div class="text-gray-400 text-sm">${video.issue}</div>
                                </div>
                                <div class="text-right ml-4">
                                    <div class="text-yellow-400 text-sm font-bold">${video.duration}</div>
                                    <div class="text-gray-400 text-xs">${video.views} views</div>
                                </div>
                            </div>
                        </div>
                    `).join('');
                    
                    gameFixesSuggestionsContainer.classList.remove('hidden');
                }
            });
            
            // Hide suggestions when clicking outside
            if (gameFixesSuggestionsContainer) {
                document.addEventListener('click', function(e) {
                    if (!gameFixesSearchInput.contains(e.target) && !gameFixesSuggestionsContainer.contains(e.target)) {
                        gameFixesSuggestionsContainer.classList.add('hidden');
                    }
                });
                
                // Handle suggestion clicks
                gameFixesSuggestionsContainer.addEventListener('click', function(e) {
                    const suggestion = e.target.closest('.video-suggestion');
                    if (suggestion) {
                        const videoTitle = suggestion.getAttribute('data-video');
                        gameFixesSearchInput.value = videoTitle;
                        gameFixesSuggestionsContainer.classList.add('hidden');
                        
                        // Optionally open the video modal
                        const video = gameFixVideos.find(v => v.title === videoTitle);
                        if (video) {
                            showVideoModal(video);
                        }
                    }
                });
            }
        }

        // Function to render bundles (for filtering)
        function renderBundles(bundles) {
            const bundlesGrid = document.getElementById('bundles-grid');
            if (bundlesGrid) {
                bundlesGrid.innerHTML = '';
                bundles.forEach(bundle => {
                    bundlesGrid.appendChild(createGameCard(bundle));
                });
            }
        }

        // Create giveaway card HTML (removed tags)
        function createGiveawayCard(giveaway) {
            const giveawayCard = document.createElement('div');
            giveawayCard.className = 'game-card p-6 relative overflow-hidden flex flex-col';
            
            // Calculate time remaining
            const now = new Date();
            const timeLeft = giveaway.endTime - now;
            const daysLeft = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hoursLeft = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const isExpired = timeLeft <= 0;
            
            giveawayCard.innerHTML = `
                <div class="flex-1">
                    <div class="mb-4">
                        <h3 class="text-lg font-bold font-['Orbitron'] text-cyan-400 mb-2">${giveaway.name}</h3>
                        <p class="text-gray-300 text-sm mb-3">${giveaway.description}</p>
                    </div>
                    <div class="space-y-3 mb-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400 text-sm">Prize Value:</span>
                            <span class="text-green-400 font-bold">${giveaway.value}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400 text-sm">Participants:</span>
                            <span class="text-cyan-400 font-bold">${giveaway.participants.toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400 text-sm">Ends in:</span>
                            <span class="text-yellow-400 font-bold">${daysLeft}d ${hoursLeft}h</span>
                        </div>
                    </div>
                </div>
                <div class="mt-auto">
                    <button class="w-full py-3 font-['Rajdhani'] text-sm font-bold giveaway-enter-btn ${isExpired ? 'bg-gray-600 text-gray-300 cursor-not-allowed' : 'cyber-button'}" data-giveaway="${giveaway.name}" ${isExpired ? 'disabled' : ''}>
                        ${isExpired ? 'GIVEAWAY ENDED' : 'ENTER GIVEAWAY'}
                    </button>
                </div>
            `;
            
            return giveawayCard;
        }

        // Create owned game card HTML
        function createOwnedGameCard(game) {
            const ownedGameCard = document.createElement('div');
            ownedGameCard.className = 'game-card p-4 relative overflow-hidden';
            
            // Get random poster background
            const randomPoster = "images/img1.png";
            
            const achievementPercentage = Math.round((game.achievements / game.totalAchievements) * 100);
            
            ownedGameCard.innerHTML = `
                <div class="absolute inset-0">
                    <img src="${randomPoster}" alt="Gaming poster" class="w-full h-full object-cover opacity-30">
                </div>
                <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                
                <!-- Active Tag -->
                <div class="absolute top-2 right-2 z-20">
                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold">
                        ‚úì ACTIVE
                    </span>
                </div>
                
                <div class="relative z-10">
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-sm font-bold font-['Orbitron'] text-cyan-400 leading-tight">${game.title}</h3>
                    </div>
                    <div class="space-y-2 mb-4">
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">Hours Played:</span>
                            <span class="text-white font-semibold">${game.hoursPlayed}h</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">Last Played:</span>
                            <span class="text-white font-semibold">${game.lastPlayed}</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">Achievements:</span>
                            <span class="text-yellow-400 font-semibold">${game.achievements}/${game.totalAchievements} (${achievementPercentage}%)</span>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button class="cyber-button flex-1 py-1 font-['Rajdhani'] text-xs font-bold favorite-btn" data-game='${JSON.stringify(game)}'>
                            ${favoriteGames.some(fav => fav.title === game.title) ? '‚≠ê FAVORITED' : '‚≠ê ADD TO FAVORITE'}
                        </button>
                        <button class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 text-xs font-bold transition-colors game-settings-btn" data-game='${JSON.stringify(game)}'>
                            ‚öôÔ∏è
                        </button>
                    </div>
                </div>
            `;
            
            return ownedGameCard;
        }

        // Create video card HTML for game fixes
        function createVideoCard(video) {
            const videoCard = document.createElement('div');
            videoCard.className = 'game-card overflow-hidden relative w-full aspect-video cursor-pointer';
            
            // Get random poster background
            const randomPoster = gamingPosters[Math.floor(Math.random() * gamingPosters.length)];
            
            videoCard.innerHTML = `
                <div class="absolute inset-0">
                    <img src="${randomPoster}" alt="Gaming poster" class="w-full h-full object-cover">
                </div>
                <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                
                <!-- Play Button Overlay -->
                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition-colors">
                        <svg class="w-8 h-8 text-white ml-1" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </div>
                </div>
                
                <!-- Duration Badge -->
                <div class="absolute top-3 right-3 bg-black bg-opacity-80 text-white px-2 py-1 rounded text-sm font-bold">
                    ${video.duration}
                </div>
                
                <!-- Views Badge -->
                <div class="absolute top-3 left-3 bg-cyan-600 bg-opacity-80 text-white px-2 py-1 rounded text-xs font-bold">
                    üëÅ ${video.views} views
                </div>
                
                <div class="relative z-10 h-full flex flex-col">
                    <div class="flex-1"></div>
                    <div class="bg-black bg-opacity-80 p-4 backdrop-blur-sm">
                        <h3 class="text-lg font-bold font-['Orbitron'] text-cyan-400 mb-2 leading-tight">${video.title}</h3>
                        <p class="text-gray-300 text-sm mb-2">${video.issue}</p>
                        <div class="flex items-center justify-between">
                            <span class="text-yellow-400 text-sm font-semibold">üéÆ ${video.game}</span>
                            <button class="cyber-button px-4 py-2 font-['Rajdhani'] text-sm font-bold watch-video-btn" data-video='${JSON.stringify(video)}'>
                                WATCH FIX
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            return videoCard;
        }

        // Create game card HTML
        function createGameCard(game) {
    const gameCard = document.createElement('div');
    gameCard.className = 'game-card overflow-hidden relative w-full aspect-[2/3] cursor-pointer';

    // Use the game's unique image
    const gameImage = game.image || "images/default-poster.png"; // Fallback to default if no image is set

    gameCard.innerHTML = `
        <div class="absolute inset-0">
            <img src="${gameImage}" alt="${game.title} poster" class="w-full h-full object-cover">
        </div>
        <div class="absolute inset-0 bg-black bg-opacity-40"></div>
        <div class="relative z-10 h-full flex flex-col">
            <div class="flex-1 p-3 flex flex-col justify-between">
                <div class="flex justify-between items-start">
                    ${game.isBundle ? '<span class="bg-purple-600 text-white px-2 py-1 rounded-full text-xs font-bold">üì¶ BUNDLE</span>' : '<div></div>'}
                    ${game.isBundle ? 
                        '<div></div>' : 
                        `<span class="px-2 py-1 rounded-full text-xs font-bold ${game.stock === 'In Stock' ? 'bg-green-600 text-white' : 'bg-red-600 text-white'}">${game.stock}</span>`
                    }
                </div>
                <div class="bg-black bg-opacity-40 backdrop-blur-sm -mx-3 -mb-3 px-3 py-3 pb-6">
                    <h3 class="text-sm font-bold font-['Orbitron'] text-cyan-400 mb-3 leading-tight">${game.title}</h3>
                    <div class="flex flex-col space-y-2">
                        <div class="flex items-center space-x-2">
                            <span class="text-lg font-bold text-green-400">${game.price}</span>
                            ${game.originalPrice ? `<span class="text-gray-300 line-through text-xs">${game.originalPrice}</span>` : ''}
                        </div>
                        <button class="${game.isBundle ? 'cyber-button' : (game.stock === 'Out of Stock' ? 'bg-gray-600 text-gray-300 cursor-not-allowed' : 'cyber-button')} px-3 py-1 font-['Rajdhani'] text-xs w-full ${game.isBundle ? 'bundle-card-btn' : 'buy-now-btn'}" ${game.isBundle ? `data-bundle='${JSON.stringify(game)}'` : `data-game='${JSON.stringify(game)}'`} ${!game.isBundle && game.stock === 'Out of Stock' ? 'disabled' : ''}>
                            ${game.isBundle ? 'VIEW BUNDLE' : (game.stock === 'Out of Stock' ? 'OUT OF STOCK' : 'BUY NOW')}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `;

    return gameCard;
}


        // Game Bundles data
        const gameBundles = [
            {
                title: "Cyber Action Bundle",
                price: "$89.99",
                originalPrice: "$149.99",
                discount: "40% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                isBundle: true,
                games: [
                    "Neon Runner 2077",
                    "Cyber Warfare Elite", 
                    "Matrix Hacker",
                    "Digital Ghost"
                ],
                image: "images/img1.png"
            },
            {
                title: "Indie Classics Pack",
                price: "$39.99",
                originalPrice: "$79.99",
                discount: "50% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                isBundle: true,
                games: [
                    "Pixel Warrior",
                    "Retro Fighter",
                    "Neon Arcade",
                    "Space Invader Pro",
                    "Cyber Classic"
                ]
            },
            {
                title: "Racing Ultimate Bundle",
                price: "$69.99",
                originalPrice: "$99.99",
                discount: "30% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                isBundle: true,
                games: [
                    "Neon Speed Racer",
                    "Cyber Highway",
                    "Quantum Racing"
                ],
                image: "images/img1.png"
            },
            {
                title: "Strategy Master Collection",
                price: "$54.99",
                originalPrice: "$89.99",
                discount: "39% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                isBundle: true,
                games: [
                    "Neural Network",
                    "Code Assassin",
                    "Cyber Protocol",
                    "Quantum Breach",
                    "Virtual Reality X"
                ],
                image: "images/img1.png"
            },
            {
                title: "Complete Gamer Pack",
                price: "$129.99",
                originalPrice: "$199.99",
                discount: "35% OFF",
                rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                isBundle: true,
                games: [
                    "Synthwave City",
                    "Digital Ghost",
                    "Pixel Warrior",
                    "Matrix Hacker",
                    "Neon Runner 2077",
                    "Cyber Warfare Elite",
                    "Space Invader Pro"
                ],
                image: "images/img1.png"
            }
        ];

        // All games for store page (including bundles at the top)
        const allGames = [...gameBundles, ...featuredGames, ...newReleases, ...bestSellers];

        // Game Fixes Videos data
        const gameFixVideos = [
            {
                title: "Neon Runner 2077 - Crash Fix",
                game: "Neon Runner 2077",
                issue: "Game crashes on startup",
                duration: "3:45",
                views: "125K",
                description: "Learn how to fix the common startup crash issue in Neon Runner 2077. This tutorial covers driver updates, compatibility settings, and file verification.",
                solution: "Update your graphics drivers to the latest version and run the game in compatibility mode for Windows 10. Also verify game files through Steam.",
                isVideo: true
            },
            {
                title: "Cyber Warfare Elite - FPS Drop Solution",
                game: "Cyber Warfare Elite",
                issue: "Low FPS and stuttering",
                duration: "5:22",
                views: "89K",
                description: "Optimize your Cyber Warfare Elite performance with these proven settings. Boost your FPS and eliminate stuttering for smooth gameplay.",
                solution: "Lower shadow quality to medium, disable motion blur, and set texture streaming to high. Also close unnecessary background applications.",
                isVideo: true
            },
            {
                title: "Matrix Hacker - Audio Bug Repair",
                game: "Matrix Hacker",
                issue: "No sound or audio glitches",
                duration: "2:18",
                views: "67K",
                description: "Fix audio issues in Matrix Hacker including missing sound effects, distorted audio, and microphone problems in multiplayer.",
                solution: "Update your audio drivers and set the game's audio format to 44.1kHz 16-bit. Disable audio enhancements in Windows sound settings.",
                isVideo: true
            },
            {
                title: "Digital Ghost - Save File Recovery",
                game: "Digital Ghost",
                issue: "Lost save files and progress",
                duration: "4:33",
                views: "156K",
                description: "Recover your lost Digital Ghost save files and prevent future data loss. Learn about cloud saves and backup strategies.",
                solution: "Check Steam Cloud saves first, then look in the local AppData folder. Enable Steam Cloud sync and create manual backups regularly.",
                isVideo: true
            }
        ];

        // Active Giveaways data
        const activeGiveaways = [
            {
                name: "Neon Runner 2077 Ultimate Edition",
                participants: 15847,
                endTime: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000), // 5 days from now
                prize: "Game + Season Pass",
                value: "$89.99",
                description: "Win the complete Neon Runner experience with all DLC included!"
            },
            {
                name: "Gaming Peripheral Bundle",
                participants: 8923,
                endTime: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000), // 2 days from now
                prize: "RGB Keyboard + Mouse",
                value: "$199.99",
                description: "Professional gaming setup with RGB lighting and mechanical switches."
            },
            {
                name: "Cyber Warfare Elite Collector's Edition",
                participants: 12456,
                endTime: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days from now
                prize: "Physical + Digital Copy",
                value: "$149.99",
                description: "Limited edition with exclusive artwork, soundtrack, and in-game items."
            },
            {
                name: "Retro Gaming Console Bundle",
                participants: 5432,
                endTime: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000), // 1 day ago (expired)
                prize: "Retro Console + 50 Games",
                value: "$299.99",
                description: "Classic gaming console with a collection of retro games."
            },
            {
                name: "VR Headset Premium Package",
                participants: 18234,
                endTime: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000), // 3 days ago (expired)
                prize: "VR Headset + Controllers",
                value: "$599.99",
                description: "Next-gen VR experience with wireless controllers and premium accessories."
            },
            {
                name: "Gaming Chair Deluxe Edition",
                participants: 9876,
                endTime: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000), // 5 days ago (expired)
                prize: "Ergonomic Gaming Chair",
                value: "$399.99",
                description: "Professional gaming chair with RGB lighting and premium leather."
            },
            {
                name: "Streaming Setup Complete Kit",
                participants: 14567,
                endTime: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000), // 7 days ago (expired)
                prize: "Camera + Microphone + Lights",
                value: "$799.99",
                description: "Everything you need to start professional game streaming."
            },
            {
                name: "Mechanical Keyboard Collection",
                participants: 6789,
                endTime: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000), // 10 days ago (expired)
                prize: "3 Premium Keyboards",
                value: "$449.99",
                description: "Collection of three different mechanical keyboards with custom switches."
            }
        ];

        // Changelogs data
        const changelogs = [
            {
                version: "v2.4.1",
                date: "2024-03-15",
                type: "Website",
                changes: [
                    "Fixed mobile navigation scroll behavior on account page",
                    "Improved bundle modal loading animation performance",
                    "Added better error handling for payment processing",
                    "Enhanced search functionality with better filtering",
                    "Fixed cart item removal not updating button states"
                ]
            },
            {
                version: "v2.4.0",
                date: "2024-03-12",
                type: "Database",
                changes: [
                    "Optimized game catalog indexing for faster search results",
                    "Added new database tables for user preferences and settings",
                    "Improved giveaway participant tracking system",
                    "Enhanced security measures for user authentication data",
                    "Migrated legacy bundle data to new normalized structure"
                ]
            },
            {
                version: "v2.3.8",
                date: "2024-03-10",
                type: "Website",
                changes: [
                    "Redesigned video modal with better loading states",
                    "Added circular progress indicators for better UX",
                    "Fixed responsive design issues on tablet devices",
                    "Improved accessibility with better keyboard navigation",
                    "Enhanced color contrast for better readability"
                ]
            },
            {
                version: "v2.3.7",
                date: "2024-03-08",
                type: "Database",
                changes: [
                    "Implemented automatic backup system for user data",
                    "Added database connection pooling for better performance",
                    "Fixed memory leaks in giveaway expiration cleanup",
                    "Optimized query performance for owned games retrieval",
                    "Added data validation rules for cart and favorites"
                ]
            },
            {
                version: "v2.3.6",
                date: "2024-03-05",
                type: "Website",
                changes: [
                    "Added new game fixes video section with search",
                    "Implemented user favorites system for games",
                    "Enhanced bundle details modal with game listings",
                    "Fixed authentication modal form validation",
                    "Improved mobile bottom navigation behavior"
                ]
            },
            {
                version: "v2.3.5",
                date: "2024-03-03",
                type: "Database",
                changes: [
                    "Added foreign key constraints for data integrity",
                    "Implemented soft delete for user account management",
                    "Enhanced logging system for better debugging",
                    "Added database health monitoring and alerts",
                    "Optimized storage for game poster image references"
                ]
            },
            {
                version: "v2.3.4",
                date: "2024-03-01",
                type: "Website",
                changes: [
                    "Redesigned account page with better organization",
                    "Added giveaway participation tracking system",
                    "Enhanced shopping cart with better item management",
                    "Fixed side menu navigation on mobile devices",
                    "Improved loading animations across all pages"
                ]
            },
            {
                version: "v2.3.3",
                date: "2024-02-28",
                type: "Database",
                changes: [
                    "Migrated to new cloud infrastructure for better reliability",
                    "Added real-time synchronization for cart updates",
                    "Enhanced security with encrypted user sessions",
                    "Implemented database sharding for scalability",
                    "Added automated testing for data consistency"
                ]
            }
        ];

        // Initialize download buttons
        function initDownloadButtons() {
            // Download button handlers are added via event delegation in the main click handler
        }

        // Handle download functionality
        function handleDownload(platform) {
            // Show loading animation
            showCircularLoading();
            
            setTimeout(() => {
                if (platform === 'android') {
                    showNotification('ü§ñ Android APK download started! Check your downloads folder.', 'success');
                } else if (platform === 'windows') {
                    showNotification('üíª Windows EXE download started! Check your downloads folder.', 'success');
                }
            }, 2200);
        }

        function handleStoreRedirect(store) {
            if (store === 'playstore') {
                showNotification('üè™ Redirecting to Google Play Store...', 'info');
                // In a real app, this would open the Play Store
                setTimeout(() => {
                    window.open('https://play.google.com/store', '_blank', 'noopener,noreferrer');
                }, 1000);
            } else if (store === 'microsoft') {
                showNotification('üè™ Redirecting to Microsoft Store...', 'info');
                // In a real app, this would open the Microsoft Store
                setTimeout(() => {
                    window.open('https://www.microsoft.com/store', '_blank', 'noopener,noreferrer');
                }, 1000);
            }
        }

        // Function to render changelogs
        function renderChangelogs() {
            const changelogsContainer = document.getElementById('changelogs-container');
            if (!changelogsContainer) return;
            
            changelogsContainer.innerHTML = '';
            
            changelogs.forEach((changelog, index) => {
                const changelogCard = document.createElement('div');
                changelogCard.className = 'game-card p-6';
                
                const typeColor = changelog.type === 'Website' ? 'text-cyan-400' : 'text-purple-400';
                const typeIcon = changelog.type === 'Website' ? 'üåê' : 'üóÑÔ∏è';
                
                changelogCard.innerHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">${typeIcon}</span>
                            <div>
                                <h3 class="text-xl font-bold font-['Orbitron'] ${index === 0 ? 'text-yellow-400' : typeColor}">${changelog.version}</h3>
                                <p class="text-sm text-gray-400">${changelog.type} Update</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-white font-semibold">${changelog.date}</p>
                            <p class="text-xs text-gray-400">${changelog.changes.length} changes</p>
                        </div>
                    </div>
                    
                    <div class="space-y-2">
                        ${changelog.changes.map(change => `
                            <div class="flex items-start space-x-3 py-2 border-b border-gray-700 last:border-b-0">
                                <span class="text-green-400 mt-1 flex-shrink-0">‚Ä¢</span>
                                <p class="text-gray-300 text-sm leading-relaxed">${change}</p>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                changelogsContainer.appendChild(changelogCard);
            });
        }

        // Owned Games data (shown when logged in)
        const ownedGames = [
            {
                title: "Pixel Warrior",
                purchaseDate: "2024-01-15",
                hoursPlayed: 47,
                lastPlayed: "2 days ago",
                achievements: 15,
                totalAchievements: 25,
                status: "Installed"
            },
            {
                title: "Space Invader Pro",
                purchaseDate: "2024-02-03",
                hoursPlayed: 23,
                lastPlayed: "1 week ago",
                achievements: 8,
                totalAchievements: 20,
                status: "Not Installed"
            },
            {
                title: "Neon Arcade",
                purchaseDate: "2024-02-20",
                hoursPlayed: 12,
                lastPlayed: "3 days ago",
                achievements: 5,
                totalAchievements: 18,
                status: "Installed"
            },
            {
                title: "Cyber Classic",
                purchaseDate: "2024-01-28",
                hoursPlayed: 89,
                lastPlayed: "Yesterday",
                achievements: 22,
                totalAchievements: 30,
                status: "Installed"
            },
            {
                title: "Matrix Hacker",
                purchaseDate: "2024-01-10",
                hoursPlayed: 156,
                lastPlayed: "Today",
                achievements: 45,
                totalAchievements: 50,
                status: "Installed"
            },
            {
                title: "Digital Ghost",
                purchaseDate: "2024-02-14",
                hoursPlayed: 78,
                lastPlayed: "4 days ago",
                achievements: 28,
                totalAchievements: 35,
                status: "Installed"
            },
            {
                title: "Synthwave City",
                purchaseDate: "2024-01-22",
                hoursPlayed: 34,
                lastPlayed: "1 week ago",
                achievements: 12,
                totalAchievements: 28,
                status: "Installed"
            },
            {
                title: "Quantum Breach",
                purchaseDate: "2024-02-25",
                hoursPlayed: 19,
                lastPlayed: "5 days ago",
                achievements: 7,
                totalAchievements: 22,
                status: "Installed"
            }
        ];

        // Render games for each section
        function renderGames() {
            // Render Featured Games
            const featuredGrid = document.getElementById('featured-games-grid');
            featuredGrid.innerHTML = '';
            featuredGames.forEach(game => {
                featuredGrid.appendChild(createGameCard(game));
            });

            // Render New Releases
            const newReleasesGrid = document.getElementById('new-releases-grid');
            newReleasesGrid.innerHTML = '';
            newReleases.forEach(game => {
                newReleasesGrid.appendChild(createGameCard(game));
            });

            // Render Best Sellers
            const bestSellersGrid = document.getElementById('best-sellers-grid');
            bestSellersGrid.innerHTML = '';
            bestSellers.forEach(game => {
                bestSellersGrid.appendChild(createGameCard(game));
            });

            // Render Game Bundles for store page
            const bundlesGrid = document.getElementById('bundles-grid');
            if (bundlesGrid) {
                bundlesGrid.innerHTML = '';
                gameBundles.forEach(bundle => {
                    bundlesGrid.appendChild(createGameCard(bundle));
                });
            }

            // Render Giveaways (limited)
            renderGiveaways();

            // Render Owned Games (limited)
            renderOwnedGames();
        }

        // Configuration change handler
        async function onConfigChange(config) {
            const storeTitle = config.store_title || defaultConfig.store_title;
            const heroTagline = config.hero_tagline || defaultConfig.hero_tagline;
            const featuredSectionTitle = config.featured_section_title || defaultConfig.featured_section_title;

            document.getElementById('store-title').textContent = storeTitle;
            document.getElementById('hero-tagline').textContent = heroTagline;
            document.getElementById('featured-section-title').textContent = featuredSectionTitle;
        }

        // Capabilities mapping
        function mapToCapabilities(config) {
            return {
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        // Edit panel values mapping
        function mapToEditPanelValues(config) {
            return new Map([
                ["store_title", config.store_title || defaultConfig.store_title],
                ["hero_tagline", config.hero_tagline || defaultConfig.hero_tagline],
                ["featured_section_title", config.featured_section_title || defaultConfig.featured_section_title]
            ]);
        }

        // Banner slider functionality with game poster backgrounds
        const bannerSlides = [
            {
                background: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1920' height='300' viewBox='0 0 1920 300'%3E%3Cdefs%3E%3ClinearGradient id='banner1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ff6b35;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23000000;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2300ffff;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='1920' height='300' fill='url(%23banner1)'/%3E%3Crect x='100' y='50' width='300' height='200' fill='%23000' opacity='0.3' rx='10'/%3E%3Crect x='500' y='30' width='280' height='240' fill='%23000' opacity='0.2' rx='10'/%3E%3Crect x='850' y='40' width='320' height='220' fill='%23000' opacity='0.25' rx='10'/%3E%3Crect x='1250' y='35' width='290' height='230' fill='%23000' opacity='0.3' rx='10'/%3E%3Crect x='1600' y='45' width='280' height='210' fill='%23000' opacity='0.2' rx='10'/%3E%3Cpolygon points='200,120 180,180 220,180' fill='%23fff' opacity='0.8'/%3E%3Ccircle cx='640' cy='150' r='30' fill='%2300ffff' opacity='0.7'/%3E%3Crect x='990' y='130' width='40' height='40' fill='%23ff00ff' opacity='0.6'/%3E%3Cpolygon points='1400,100 1380,160 1420,160' fill='%2300ff00' opacity='0.7'/%3E%3Ccircle cx='1740' cy='150' r='25' fill='%23ffff00' opacity='0.8'/%3E%3C/svg%3E"
            },
            {
                background: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1920' height='300' viewBox='0 0 1920 300'%3E%3Cdefs%3E%3ClinearGradient id='banner2' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23330066;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23ff00ff;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23000033;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='1920' height='300' fill='url(%23banner2)'/%3E%3Crect x='80' y='40' width='280' height='220' fill='%23000' opacity='0.4' rx='10'/%3E%3Crect x='420' y='25' width='300' height='250' fill='%23000' opacity='0.3' rx='10'/%3E%3Crect x='780' y='35' width='290' height='230' fill='%23000' opacity='0.35' rx='10'/%3E%3Crect x='1130' y='30' width='310' height='240' fill='%23000' opacity='0.3' rx='10'/%3E%3Crect x='1500' y='40' width='280' height='220' fill='%23000' opacity='0.4' rx='10'/%3E%3Ccircle cx='220' cy='150' r='35' fill='%2300ffff' opacity='0.8'/%3E%3Crect x='550' y='125' width='50' height='50' fill='%23ff00ff' opacity='0.7' transform='rotate(45 575 150)'/%3E%3Cpolygon points='925,100 905,200 945,200' fill='%23ffff00' opacity='0.6'/%3E%3Ccircle cx='1285' cy='150' r='40' fill='%2300ff00' opacity='0.7'/%3E%3Crect x='1620' y='130' width='40' height='40' fill='%23ff6b35' opacity='0.8'/%3E%3C/svg%3E"
            },
            {
                background: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1920' height='300' viewBox='0 0 1920 300'%3E%3Cdefs%3E%3ClinearGradient id='banner3' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23003300;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%2300ff00;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23001100;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='1920' height='300' fill='url(%23banner3)'/%3E%3Crect x='120' y='30' width='290' height='240' fill='%23000' opacity='0.3' rx='10'/%3E%3Crect x='460' y='40' width='280' height='220' fill='%23000' opacity='0.4' rx='10'/%3E%3Crect x='800' y='25' width='320' height='250' fill='%23000' opacity='0.2' rx='10'/%3E%3Crect x='1180' y='35' width='300' height='230' fill='%23000' opacity='0.35' rx='10'/%3E%3Crect x='1540' y='30' width='290' height='240' fill='%23000' opacity='0.3' rx='10'/%3E%3Crect x='245' y='125' width='40' height='40' fill='%2300ffff' opacity='0.8'/%3E%3Ccircle cx='600' cy='150' r='30' fill='%23ff00ff' opacity='0.7'/%3E%3Cpolygon points='960,80 940,220 980,220' fill='%23ffff00' opacity='0.6'/%3E%3Ccircle cx='1330' cy='150' r='35' fill='%23ff6b35' opacity='0.8'/%3E%3Crect x='1665' y='130' width='40' height='40' fill='%2300ff00' opacity='0.7' transform='rotate(45 1685 150)'/%3E%3C/svg%3E"
            }
        ];

        let currentSlide = 0;

        function initBannerSlider() {
            const slides = document.querySelectorAll('.banner-slide');
            const slidesContainer = document.getElementById('slides-container');
            
            // Set background images
            slides.forEach((slide, index) => {
                slide.style.backgroundImage = `url("${bannerSlides[index].background}")`;
            });

            // No auto-slide functionality - images stay static
        }



        // Authentication system
        let isLoggedIn = false;
        let currentUser = null;
        let userGiveawayEntries = [];

        function updateAuthButton() {
            const authButton = document.getElementById('auth-button');
            const authText = authButton.querySelector('.auth-text');
            const authIcon = authButton.querySelector('.auth-icon svg path');
            const cartSection = document.getElementById('cart-section');
            const ownedGamesSection = document.getElementById('owned-games-section');
            const accountMenuItem = document.querySelector('[data-page="account"]');
            
            if (isLoggedIn) {
                authText.textContent = 'Logout';
                // Change icon to logout icon
                authIcon.setAttribute('d', 'M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z');
                cartSection.style.display = 'block';
                if (ownedGamesSection) {
                    ownedGamesSection.style.display = 'block';
                }
                if (accountMenuItem) {
                    accountMenuItem.style.display = 'block';
                }
            } else {
                authText.textContent = 'Login';
                // Change icon to login icon
                authIcon.setAttribute('d', 'M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7.5V9M15 11.5V9.5L21 9V11L15 11.5ZM11 15.5C11 16.3 10.3 17 9.5 17S8 16.3 8 15.5 8.7 14 9.5 14 11 14.7 11 15.5ZM16 15.5C16 16.3 15.3 17 14.5 17S13 16.3 13 15.5 13.7 14 14.5 14 16 14.7 16 15.5ZM12 20.5C12.8 20.5 13.5 19.8 13.5 19S12.8 17.5 12 17.5 10.5 18.2 10.5 19 11.2 20.5 12 20.5Z');
                cartSection.style.display = 'none';
                if (ownedGamesSection) {
                    ownedGamesSection.style.display = 'none';
                }
                if (accountMenuItem) {
                    accountMenuItem.style.display = 'none';
                }
            }
        }

        function showAuthModal() {
            const authModal = document.getElementById('auth-modal');
            authModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideAuthModal() {
            const authModal = document.getElementById('auth-modal');
            authModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function showLoginForm() {
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('signup-form').classList.add('hidden');
        }

        function showSignupForm() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('signup-form').classList.remove('hidden');
        }

        function handleLogin(email, password) {
            // Simulate login process
            if (email && password) {
                showAuthLoading('LOGGING IN...');
                
                // Simulate login delay
                setTimeout(() => {
                    isLoggedIn = true;
                    currentUser = {
                        email: email,
                        username: email.split('@')[0],
                        steamId: 'STEAM_' + Math.random().toString(36).substr(2, 9).toUpperCase()
                    };
                    updateAuthButton();
                    hideAuthModal();
                    
                    // Show success message
                    showNotification('Login successful! Welcome back, ' + currentUser.username + '!', 'success');
                    
                    // Update account page if currently viewing it
                    if (currentPage === 'account') {
                        updateAccountPage();
                    }
                    
                    // Clear form
                    document.getElementById('login-form-element').reset();
                }, 2200); // Wait for loading animation to complete
            }
        }

        function handleSignup(username, email, password) {
            // Simulate signup process
            if (username && email && password) {
                showAuthLoading('CREATING ACCOUNT...');
                
                // Simulate signup delay
                setTimeout(() => {
                    isLoggedIn = true;
                    currentUser = {
                        email: email,
                        username: username,
                        steamId: 'STEAM_' + Math.random().toString(36).substr(2, 9).toUpperCase()
                    };
                    updateAuthButton();
                    hideAuthModal();
                    
                    // Show success message
                    showNotification('Account created successfully! Welcome, ' + username + '!', 'success');
                    
                    // Update account page if currently viewing it
                    if (currentPage === 'account') {
                        updateAccountPage();
                    }
                    
                    // Clear form
                    document.getElementById('signup-form-element').reset();
                }, 2200); // Wait for loading animation to complete
            }
        }

        function handleLogout() {
            isLoggedIn = false;
            currentUser = null;
            userGiveawayEntries = [];
            updateAuthButton();
            showNotification('Logged out successfully!', 'info');
        }

        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-3 font-['Rajdhani'] font-semibold text-white transform translate-x-full transition-transform duration-300 ${
                type === 'success' ? 'bg-green-600' : 
                type === 'error' ? 'bg-red-600' : 
                'bg-blue-600'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Slide in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Slide out and remove
            setTimeout(() => {
                notification.style.transform = 'translateX(full)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Loading functionality
        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            const loadingBar = document.getElementById('loading-bar');
            
            loadingOverlay.classList.remove('hidden');
            loadingBar.style.width = '0%';
            
            // Animate loading bar from 0% to 100% over 4 seconds
            let progress = 0;
            const interval = setInterval(() => {
                progress += 2.5; // Increment by 2.5% every 100ms (40 steps = 4 seconds)
                loadingBar.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        loadingOverlay.classList.add('hidden');
                    }, 200); // Small delay before hiding
                }
            }, 100);
        }

        // Auth loading functionality with circular progress
        function showAuthLoading(message) {
            const authModal = document.getElementById('auth-modal');
            const authContent = authModal.querySelector('.bg-gradient-to-br');
            
            // Store original content
            const originalContent = authContent.innerHTML;
            
            // Show loading animation
            authContent.innerHTML = `
                <div class="text-center py-16">
                    <div class="loading-text mb-8">${message}</div>
                    <div class="flex justify-center">
                        <div class="relative w-24 h-24">
                            <svg class="w-24 h-24 transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="#00ffff" stroke-width="4" fill="none" opacity="0.3"/>
                                <circle id="auth-progress-circle" cx="50" cy="50" r="40" stroke="#ff00ff" stroke-width="4" fill="none" 
                                        stroke-dasharray="251.2" stroke-dashoffset="251.2" stroke-linecap="round"
                                        style="transition: stroke-dashoffset 0.1s ease;"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span id="auth-progress-text" class="text-cyan-400 font-bold text-lg">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Animate the circular progress bar
            const progressCircle = document.getElementById('auth-progress-circle');
            const progressText = document.getElementById('auth-progress-text');
            const circumference = 251.2; // 2 * œÄ * 40
            let progress = 0;
            
            const progressInterval = setInterval(() => {
                progress += 5; // Increment by 5% every 100ms (20 steps = 2 seconds)
                const offset = circumference - (progress / 100) * circumference;
                
                progressCircle.style.strokeDashoffset = offset;
                progressText.textContent = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    
                    // Restore original content after loading completes
                    setTimeout(() => {
                        authContent.innerHTML = originalContent;
                    }, 200);
                }
            }, 100);
        }

        // Tab loading functionality - now shows full screen loading for 2 seconds
        function showTabLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            const loadingBar = document.getElementById('loading-bar');
            
            loadingOverlay.classList.remove('hidden');
            loadingBar.style.width = '0%';
            
            // Animate loading bar from 0% to 100% over 2 seconds
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5; // Increment by 5% every 100ms (20 steps = 2 seconds)
                loadingBar.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        loadingOverlay.classList.add('hidden');
                    }, 200); // Small delay before hiding
                }
            }, 100);
        }

        // Circular loading functionality for BUY NOW buttons
        function showCircularLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            
            // Replace the loading content with circular progress
            loadingOverlay.innerHTML = `
                <div class="loading-text">PROCESSING...</div>
                <div class="flex justify-center">
                    <div class="relative w-24 h-24">
                        <svg class="w-24 h-24 transform -rotate-90" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="40" stroke="#00ffff" stroke-width="4" fill="none" opacity="0.3"/>
                            <circle id="circular-progress-circle" cx="50" cy="50" r="40" stroke="#ff00ff" stroke-width="4" fill="none" 
                                    stroke-dasharray="251.2" stroke-dashoffset="251.2" stroke-linecap="round"
                                    style="transition: stroke-dashoffset 0.1s ease;"/>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span id="circular-progress-text" class="text-cyan-400 font-bold text-lg">0%</span>
                        </div>
                    </div>
                </div>
            `;
            
            loadingOverlay.classList.remove('hidden');
            
            // Animate the circular progress bar
            const progressCircle = document.getElementById('circular-progress-circle');
            const progressText = document.getElementById('circular-progress-text');
            const circumference = 251.2; // 2 * œÄ * 40
            let progress = 0;
            
            const progressInterval = setInterval(() => {
                progress += 5; // Increment by 5% every 100ms (20 steps = 2 seconds)
                const offset = circumference - (progress / 100) * circumference;
                
                progressCircle.style.strokeDashoffset = offset;
                progressText.textContent = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    setTimeout(() => {
                        loadingOverlay.classList.add('hidden');
                        // Restore original loading content
                        loadingOverlay.innerHTML = `
                            <div class="loading-text">PLEASE WAIT...</div>
                            <div class="loading-bar-container">
                                <div class="loading-bar" id="loading-bar"></div>
                            </div>
                        `;
                    }, 200);
                }
            }, 100);
        }

        // Simple tab functionality with loading
        function initTabs() {
            const desktopTabButtons = document.querySelectorAll('.desktop-tabs .tab-button');
            const mobileGameTabButtons = document.querySelectorAll('.mobile-game-tabs .tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            // Function to handle tab switching
            function switchTab(targetTab, clickedButton) {
                // Show tab loading screen (only covers cards area)
                showTabLoading();
                
                // Wait for loading to complete before switching tabs
                setTimeout(() => {
                    // Remove active class from all buttons and contents
                    desktopTabButtons.forEach(btn => btn.classList.remove('active'));
                    mobileGameTabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding content
                    clickedButton.classList.add('active');
                    
                    // Also activate the corresponding button in the other navigation
                    const correspondingButtons = document.querySelectorAll(`[data-tab="${targetTab}"]`);
                    correspondingButtons.forEach(btn => btn.classList.add('active'));
                    
                    document.getElementById(targetTab + '-tab').classList.add('active');
                }, 2200); // Wait for loading to complete (2 seconds + 200ms delay)
            }

            // Add event listeners to desktop tab buttons
            desktopTabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.getAttribute('data-tab');
                    switchTab(targetTab, button);
                });
            });

            // Mobile game tabs removed - no longer needed
        }

        // Feature tabs functionality for Downloads page
        function initFeatureTabs() {
            const featureTabButtons = document.querySelectorAll('.feature-tab-button');
            const featureTabContents = document.querySelectorAll('.feature-tab-content');

            // Function to handle feature tab switching
            function switchFeatureTab(targetTab, clickedButton) {
                // Show tab loading screen
                showTabLoading();
                
                // Wait for loading to complete before switching tabs
                setTimeout(() => {
                    // Remove active class from all buttons and contents
                    featureTabButtons.forEach(btn => btn.classList.remove('active'));
                    featureTabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding content
                    clickedButton.classList.add('active');
                    document.getElementById(targetTab + '-tab').classList.add('active');
                }, 2200); // Wait for loading to complete (2 seconds + 200ms delay)
            }

            // Add event listeners to feature tab buttons
            featureTabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.getAttribute('data-feature-tab');
                    switchFeatureTab(targetTab, button);
                });
            });
        }

        // Page navigation with loading
        function initPageNavigation() {
            // Mobile bottom navigation
            const mobileNavButtons = document.querySelectorAll('.mobile-bottom-nav .nav-button');
            mobileNavButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetPage = button.getAttribute('data-page');
                    if (targetPage !== currentPage) {
                        showTabLoading(); // Show loading for 2 seconds
                        setTimeout(() => {
                            showPage(targetPage);
                        }, 2200);
                    }
                });
            });

            // Side menu navigation
            const sideMenuButtons = document.querySelectorAll('.side-menu [data-page]');
            sideMenuButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetPage = button.getAttribute('data-page');
                    if (targetPage !== currentPage) {
                        closeSideMenu(); // Close side menu first
                        showTabLoading(); // Show loading for 2 seconds
                        setTimeout(() => {
                            showPage(targetPage);
                        }, 2200);
                    } else {
                        closeSideMenu(); // Just close menu if same page
                    }
                });
            });
        }

        // Page navigation functionality
        let currentPage = 'home';

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-container').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show target page
            document.getElementById(pageId + '-page').classList.add('active');
            
            // Update mobile navigation buttons
            document.querySelectorAll('.mobile-bottom-nav .nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
            
            // Update side menu buttons
            document.querySelectorAll('[data-page]').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Mobile game tabs removed - no longer needed
            
            currentPage = pageId;
            
            // Ensure mobile navigation is always visible on Account page
            const mobileNav = document.getElementById('mobile-bottom-nav');
            if (pageId === 'account' && mobileNav) {
                mobileNav.classList.remove('hidden');
            }
            
            // Update account page content based on login status
            if (pageId === 'account') {
                updateAccountPage();
            }
            

            
            // Render content for specific pages
            if (pageId === 'giveaways') {
                renderAllGiveaways();
            } else if (pageId === 'library') {
                renderAllOwnedGames();
            } else if (pageId === 'game-fixes') {
                renderGameFixes();
            } else if (pageId === 'changelogs') {
                renderChangelogs();
            } else if (pageId === 'downloads') {
                initDownloadButtons();
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function updateAccountPage() {
            const notLoggedIn = document.getElementById('account-not-logged-in');
            const loggedIn = document.getElementById('account-logged-in');
            
            if (isLoggedIn && currentUser) {
                notLoggedIn.classList.add('hidden');
                loggedIn.classList.remove('hidden');
                
                // Update profile information
                document.getElementById('profile-username').textContent = currentUser.username;
                document.getElementById('profile-email').textContent = currentUser.email;
                document.getElementById('profile-steam-id').textContent = currentUser.steamId;
                document.getElementById('profile-member-since').textContent = new Date().toLocaleDateString();
                
                // Update giveaway entries
                updateGiveawayEntries();
                
                // Update favorite games
                updateFavoriteGames();
                
                // Update video sections
                updateHelpfulVideos();
                updateSavedVideos();
                
                // Update recent activity
                updateRecentActivity();
            } else {
                notLoggedIn.classList.remove('hidden');
                loggedIn.classList.add('hidden');
            }
        }

        function updateHelpfulVideos() {
            const helpfulVideosContainer = document.getElementById('helpful-videos');
            
            if (helpfulVideos.length === 0) {
                helpfulVideosContainer.innerHTML = '<p class="text-gray-400 text-center py-4">No videos marked as helpful yet. Visit Game Fixes to mark helpful tutorials!</p>';
                return;
            }
            
            helpfulVideosContainer.innerHTML = '';
            helpfulVideos.forEach((video, index) => {
                const videoElement = document.createElement('div');
                videoElement.className = `flex items-center justify-between ${index < helpfulVideos.length - 1 ? 'border-b border-gray-700 pb-3 mb-3' : ''}`;
                
                videoElement.innerHTML = `
                    <div class="flex-1">
                        <p class="text-white font-semibold">${video.title}</p>
                        <p class="text-sm text-gray-400">${video.game} - ${video.issue}</p>
                        <p class="text-xs text-cyan-400">Marked: ${video.markedDate} at ${video.markedTime}</p>
                    </div>
                    <div class="text-right ml-4">
                        <p class="text-green-400 font-bold text-sm">‚úì HELPFUL</p>
                        <p class="text-xs text-gray-400">${video.duration} ‚Ä¢ ${video.views} views</p>
                        <button class="text-cyan-400 hover:text-cyan-300 text-sm font-semibold mt-1 watch-saved-video-btn" data-video='${JSON.stringify(video)}'>
                            Watch Again
                        </button>
                    </div>
                `;
                
                helpfulVideosContainer.appendChild(videoElement);
            });
        }

        function updateSavedVideos() {
            const savedVideosContainer = document.getElementById('saved-videos');
            
            if (savedVideos.length === 0) {
                savedVideosContainer.innerHTML = '<p class="text-gray-400 text-center py-4">No videos saved yet. Visit Game Fixes to save tutorials for later!</p>';
                return;
            }
            
            savedVideosContainer.innerHTML = '';
            savedVideos.forEach((video, index) => {
                const videoElement = document.createElement('div');
                videoElement.className = `flex items-center justify-between ${index < savedVideos.length - 1 ? 'border-b border-gray-700 pb-3 mb-3' : ''}`;
                
                videoElement.innerHTML = `
                    <div class="flex-1">
                        <p class="text-white font-semibold">${video.title}</p>
                        <p class="text-sm text-gray-400">${video.game} - ${video.issue}</p>
                        <p class="text-xs text-purple-400">Saved: ${video.savedDate} at ${video.savedTime}</p>
                    </div>
                    <div class="text-right ml-4">
                        <p class="text-purple-400 font-bold text-sm">üíæ SAVED</p>
                        <p class="text-xs text-gray-400">${video.duration} ‚Ä¢ ${video.views} views</p>
                        <div class="flex space-x-2 mt-1">
                            <button class="text-cyan-400 hover:text-cyan-300 text-sm font-semibold watch-saved-video-btn" data-video='${JSON.stringify(video)}'>
                                Watch
                            </button>
                            <button class="text-red-400 hover:text-red-300 text-sm font-semibold remove-saved-video-btn" data-video-title="${video.title}">
                                Remove
                            </button>
                        </div>
                    </div>
                `;
                
                savedVideosContainer.appendChild(videoElement);
            });
        }

        function removeSavedVideo(videoTitle) {
            savedVideos = savedVideos.filter(v => v.title !== videoTitle);
            showNotification(`${videoTitle} removed from saved videos!`, 'info');
            
            // Update account page if currently viewing it
            if (currentPage === 'account') {
                updateSavedVideos();
            }
        }
        
        function updateRecentActivity() {
            const recentActivityContainer = document.getElementById('recent-activity');
            
            if (!recentActivityContainer) return;
            
            // Show only purchased orders
            const purchasedGames = [];
            
            // Add all purchased games from order history
            orderHistory.forEach(order => {
                order.items.forEach(item => {
                    purchasedGames.push({
                        gameName: item.title,
                        purchasePrice: item.price,
                        purchaseDate: order.date,
                        status: 'Active' // All purchased games are active
                    });
                });
            });
            
            if (purchasedGames.length === 0) {
                recentActivityContainer.innerHTML = '<p class="text-gray-400 text-center py-4">No purchased games yet. Visit the Store to buy games!</p>';
                return;
            }
            
            // Sort by most recent first
            purchasedGames.sort((a, b) => {
                return new Date(b.purchaseDate) - new Date(a.purchaseDate);
            });
            
            // Show all purchased games
            recentActivityContainer.innerHTML = purchasedGames.map((game, index) => `
                <div class="flex items-center justify-between ${index < purchasedGames.length - 1 ? 'border-b border-gray-700 pb-3 mb-3' : ''}">
                    <div class="flex-1">
                        <p class="text-white font-semibold">${game.gameName}</p>
                        <p class="text-sm text-gray-400">Purchased: ${game.purchaseDate}</p>
                    </div>
                    <div class="text-right ml-4">
                        <p class="text-green-400 font-bold">${game.purchasePrice}</p>
                        <span class="inline-block px-2 py-1 text-xs font-bold rounded-full bg-green-600 text-white">
                            ${game.status}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        function updateGiveawayEntries() {
            const userGiveawaysContainer = document.getElementById('user-giveaways');
            
            if (userGiveawayEntries.length === 0) {
                userGiveawaysContainer.innerHTML = '<p class="text-gray-400 text-center py-4">No giveaway entries yet. Visit the Store to enter giveaways!</p>';
                return;
            }
            
            userGiveawaysContainer.innerHTML = '';
            userGiveawayEntries.forEach(entry => {
                const entryElement = document.createElement('div');
                entryElement.className = 'flex items-center justify-between border-b border-gray-700 pb-2 mb-3';
                
                const timeLeft = entry.endTime - new Date();
                const daysLeft = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hoursLeft = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                
                entryElement.innerHTML = `
                    <div>
                        <p class="text-white font-semibold">${entry.name}</p>
                        <p class="text-sm text-gray-400">Prize: ${entry.value} ‚Ä¢ Entered: ${entry.entryDate}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-yellow-400 font-bold text-sm">${daysLeft}d ${hoursLeft}h left</p>
                        <p class="text-xs text-gray-400">${entry.participants.toLocaleString()} participants</p>
                    </div>
                `;
                
                userGiveawaysContainer.appendChild(entryElement);
            });
        }

        function updateFavoriteGames() {
            const userFavoritesContainer = document.getElementById('user-favorites');
            
            if (favoriteGames.length === 0) {
                userFavoritesContainer.innerHTML = '<p class="text-gray-400 text-center py-4">No favorite games yet. Visit your Library to add favorites!</p>';
                return;
            }
            
            userFavoritesContainer.innerHTML = '';
            favoriteGames.forEach(favorite => {
                const favoriteElement = document.createElement('div');
                favoriteElement.className = 'flex items-center justify-between border-b border-gray-700 pb-3 mb-3';
                
                const achievementPercentage = favorite.totalAchievements > 0 ? 
                    Math.round((favorite.achievements / favorite.totalAchievements) * 100) : 0;
                
                favoriteElement.innerHTML = `
                    <div class="flex-1">
                        <p class="text-white font-semibold">${favorite.title}</p>
                        <p class="text-sm text-gray-400">Added: ${favorite.dateAdded} ‚Ä¢ ${favorite.hoursPlayed}h played</p>
                        <p class="text-xs text-yellow-400">Achievements: ${favorite.achievements}/${favorite.totalAchievements} (${achievementPercentage}%)</p>
                    </div>
                    <div class="text-right ml-4">
                        <button class="text-red-400 hover:text-red-300 text-sm font-semibold remove-favorite-btn" data-game-title="${favorite.title}">
                            Remove
                        </button>
                    </div>
                `;
                
                userFavoritesContainer.appendChild(favoriteElement);
            });
        }

        // Mobile bottom navigation scroll behavior
        function initMobileNavScroll() {
            let lastScrollTop = 0;
            let scrollTimeout;
            const mobileNav = document.getElementById('mobile-bottom-nav');
            
            if (!mobileNav) return;

            window.addEventListener('scroll', function() {
                // Don't hide navigation on Account page
                if (currentPage === 'account') {
                    mobileNav.classList.remove('hidden');
                    return;
                }
                
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                // Clear existing timeout
                clearTimeout(scrollTimeout);
                
                // Determine scroll direction (only for Home and Store pages)
                if (scrollTop > lastScrollTop && scrollTop > 100) {
                    // Scrolling down - hide nav
                    mobileNav.classList.add('hidden');
                } else {
                    // Scrolling up - show nav
                    mobileNav.classList.remove('hidden');
                }
                
                // Set timeout to show nav after scrolling stops
                scrollTimeout = setTimeout(() => {
                    mobileNav.classList.remove('hidden');
                }, 1000);
                
                lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
            }, { passive: true });
        }

        // Initialize view more buttons
        function initViewMoreButtons() {
            // View more buttons removed
        }

        // Payment form input formatting
        function formatCardNumber(input) {
            let value = input.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            input.value = formattedValue;
        }

        function formatExpiryDate(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            input.value = value;
        }

        function formatCVV(input) {
            input.value = input.value.replace(/[^0-9]/g, '');
        }

        // Disable right-click context menu
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            return false;
        });

        // Disable zoom with keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Disable Ctrl+Plus, Ctrl+Minus, Ctrl+0, Ctrl+Scroll
            if ((e.ctrlKey || e.metaKey) && (e.key === '+' || e.key === '-' || e.key === '=' || e.key === '0')) {
                e.preventDefault();
                return false;
            }
            // Disable F12 (Developer Tools)
            if (e.key === 'F12') {
                e.preventDefault();
                return false;
            }
            // Disable Ctrl+Shift+I (Developer Tools)
            if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'I') {
                e.preventDefault();
                return false;
            }
            // Disable Ctrl+U (View Source)
            if ((e.ctrlKey || e.metaKey) && e.key === 'u') {
                e.preventDefault();
                return false;
            }
        });

        // Disable zoom with mouse wheel
        document.addEventListener('wheel', function(e) {
            if (e.ctrlKey || e.metaKey) {
                e.preventDefault();
                return false;
            }
        }, { passive: false });

        // Disable pinch-to-zoom on touch devices
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });

        document.addEventListener('touchmove', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Show loading screen on initial page load
            showLoading();
            
            // Initialize everything after loading completes
            setTimeout(() => {
                renderGames();
                initBannerSlider();
                initTabs();
                initFeatureTabs();
                initPageNavigation();
                initMobileNavScroll();
                updateAuthButton();
                updateAccountPage();
                initViewMoreButtons();
                initHomeSearch();
                initBundleSearch();
                initGameFixesSearch();
                updateCartDisplay(); // Initialize cart display
            }, 4200); // Wait for initial loading to complete
            
            // Auth button click handler
            document.getElementById('auth-button').addEventListener('click', function() {
                if (isLoggedIn) {
                    handleLogout();
                } else {
                    showAuthModal();
                    showLoginForm();
                }
            });

            // Modal close handlers
            document.getElementById('close-auth-modal').addEventListener('click', hideAuthModal);
            document.getElementById('auth-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideAuthModal();
                }
            });

            // Form switch handlers
            document.getElementById('show-signup').addEventListener('click', function(e) {
                e.preventDefault();
                showSignupForm();
            });
            document.getElementById('show-login').addEventListener('click', function(e) {
                e.preventDefault();
                showLoginForm();
            });

            // Form submission handlers
            document.getElementById('login-form-element').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                handleLogin(email, password);
            });

            document.getElementById('signup-form-element').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('signup-username').value;
                const email = document.getElementById('signup-email').value;
                const password = document.getElementById('signup-password').value;
                handleSignup(username, email, password);
            });

            // Account page login button
            document.getElementById('account-login-btn').addEventListener('click', function() {
                showAuthModal();
                showLoginForm();
            });

            // Cart button click handler
            document.getElementById('cart-button').addEventListener('click', function() {
                showPaymentModal();
            });

            // Payment modal close handlers
            document.getElementById('close-payment-modal').addEventListener('click', hidePaymentPage);
            document.getElementById('cancel-payment').addEventListener('click', hidePaymentPage);
            document.getElementById('payment-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hidePaymentPage();
                }
            });

            // Payment form submission (modal)
            document.getElementById('payment-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const paymentData = Object.fromEntries(formData);
                processPayment(paymentData);
            });



            // Payment form input formatting (modal)
            document.getElementById('card-number').addEventListener('input', function() {
                formatCardNumber(this);
            });

            document.getElementById('expiry-date').addEventListener('input', function() {
                formatExpiryDate(this);
            });

            document.getElementById('cvv').addEventListener('input', function() {
                formatCVV(this);
            });



            // Payment method change handler (modal)
            document.querySelectorAll('input[name="payment-method"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const cardDetails = document.getElementById('card-details');
                    if (this.value === 'credit-card') {
                        cardDetails.style.display = 'block';
                    } else {
                        cardDetails.style.display = 'none';
                    }
                });
            });



            // Bundle modal close handlers
            document.getElementById('close-bundle-modal').addEventListener('click', hideBundleModal);
            document.getElementById('bundle-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideBundleModal();
                }
            });

            // Participation modal event listeners
            document.getElementById('close-participation-modal').addEventListener('click', hideParticipationModal);
            document.getElementById('cancel-participation').addEventListener('click', hideParticipationModal);
            document.getElementById('participation-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideParticipationModal();
                }
            });

            document.getElementById('participation-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const participationCode = document.getElementById('participation-code').value.trim();
                handleParticipationSubmit(participationCode);
            });

            // Video Modal close handlers
            document.getElementById('close-video-modal').addEventListener('click', hideVideoModal);
            document.getElementById('video-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideVideoModal();
                }
            });

            // Game Settings Modal close handlers
            document.getElementById('close-game-settings-modal').addEventListener('click', hideGameSettingsModal);
            document.getElementById('cancel-settings').addEventListener('click', hideGameSettingsModal);
            document.getElementById('game-settings-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideGameSettingsModal();
                }
            });

            // Game settings action handlers
            document.getElementById('replace-game-btn').addEventListener('click', function() {
                handleGameAction('replace');
            });
            document.getElementById('repair-game-btn').addEventListener('click', function() {
                handleGameAction('repair');
            });
            document.getElementById('uninstall-game-btn').addEventListener('click', function() {
                handleGameAction('uninstall');
            });

            // Close modal on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    if (!document.getElementById('auth-modal').classList.contains('hidden')) {
                        hideAuthModal();
                    }
                    if (!document.getElementById('bundle-modal').classList.contains('hidden')) {
                        hideBundleModal();
                    }
                    if (!document.getElementById('participation-modal').classList.contains('hidden')) {
                        hideParticipationModal();
                    }
                    if (!document.getElementById('payment-modal').classList.contains('hidden')) {
                        hidePaymentPage();
                    }
                    if (!document.getElementById('game-settings-modal').classList.contains('hidden')) {
                        hideGameSettingsModal();
                    }
                    if (!document.getElementById('video-modal').classList.contains('hidden')) {
                        hideVideoModal();
                    }
                }
            });

            // Handle dynamic close button in bundle modal
            document.addEventListener('click', function(e) {
                if (e.target.id === 'close-bundle-modal-btn') {
                    hideBundleModal();
                }
            });
            
            // Initialize Element SDK if available
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    onConfigChange,
                    mapToCapabilities,
                    mapToEditPanelValues
                });
            }
        });

        // Side menu functionality
        const menuToggle = document.getElementById('menu-toggle');
        const closeMenu = document.getElementById('close-menu');
        const sideMenu = document.getElementById('side-menu');
        const menuOverlay = document.getElementById('menu-overlay');

        function openSideMenu() {
            sideMenu.classList.add('open');
            menuOverlay.classList.add('open');
            menuToggle.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeSideMenu() {
            sideMenu.classList.remove('open');
            menuOverlay.classList.remove('open');
            menuToggle.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        menuToggle.addEventListener('click', openSideMenu);
        closeMenu.addEventListener('click', closeSideMenu);
        menuOverlay.addEventListener('click', closeSideMenu);

        // Close menu on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && sideMenu.classList.contains('open')) {
                closeSideMenu();
            }
        });

        // Participation modal functions
        let currentGiveawayName = '';

        function showParticipationModal(giveawayName) {
            const participationModal = document.getElementById('participation-modal');
            const giveawayNameElement = document.getElementById('participation-giveaway-name');
            
            currentGiveawayName = giveawayName;
            giveawayNameElement.textContent = giveawayName;
            
            participationModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Focus on the input field
            setTimeout(() => {
                document.getElementById('participation-code').focus();
            }, 100);
        }

        function hideParticipationModal() {
            const participationModal = document.getElementById('participation-modal');
            participationModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            // Clear the form
            document.getElementById('participation-form').reset();
            currentGiveawayName = '';
        }

        function handleParticipationSubmit(participationCode) {
            // Validate participation code (simple validation for demo)
            if (!participationCode || participationCode.length < 3) {
                showNotification('Please enter a valid participation code!', 'error');
                return;
            }
            
            // Find the giveaway and update participant count
            const giveaway = activeGiveaways.find(g => g.name === currentGiveawayName);
            if (giveaway) {
                giveaway.participants += 1;
                
                // Add to user's giveaway entries
                userGiveawayEntries.push({
                    name: giveaway.name,
                    value: giveaway.value,
                    endTime: giveaway.endTime,
                    participants: giveaway.participants,
                    entryDate: new Date().toLocaleDateString(),
                    participationCode: participationCode
                });
                
                hideParticipationModal();
                showNotification(`Successfully entered ${currentGiveawayName} giveaway with code: ${participationCode}! Good luck!`, 'success');
                
                // Re-render giveaways to update participant count and button states
                renderGiveaways();
                
                // Update account page if currently viewing it
                if (currentPage === 'account') {
                    updateGiveawayEntries();
                }
            }
        }

        // Giveaway entry functionality
        function handleGiveawayEntry(giveawayName) {
            if (!isLoggedIn) {
                showNotification('Please log in to enter giveaways!', 'error');
                showAuthModal();
                showLoginForm();
                return;
            }
            
            // Check if already entered
            const alreadyEntered = userGiveawayEntries.some(entry => entry.name === giveawayName);
            if (alreadyEntered) {
                showNotification('You have already entered this giveaway!', 'error');
                return;
            }
            
            // Check if giveaway is expired
            const giveaway = activeGiveaways.find(g => g.name === giveawayName);
            if (giveaway && giveaway.endTime <= new Date()) {
                showNotification('This giveaway has expired!', 'error');
                return;
            }
            
            // Show participation modal
            showParticipationModal(giveawayName);
        }

        // Separate function to render giveaways (limited to 2 ACTIVE giveaways on store page)
        function renderGiveaways() {
            const giveawaysGrid = document.getElementById('giveaways-grid');
            if (giveawaysGrid) {
                giveawaysGrid.innerHTML = '';
                // Show only first 2 ACTIVE giveaways on store page (filter out expired ones)
                const activeOnly = activeGiveaways.filter(giveaway => {
                    const timeLeft = giveaway.endTime - new Date();
                    return timeLeft > 0; // Only active giveaways
                }).slice(0, 2);
                
                activeOnly.forEach(giveaway => {
                    const giveawayCard = createGiveawayCard(giveaway);
                    
                    // Check if user has already entered this giveaway
                    if (isLoggedIn && userGiveawayEntries.some(entry => entry.name === giveaway.name)) {
                        const button = giveawayCard.querySelector('.giveaway-enter-btn');
                        button.textContent = 'ALREADY ENTERED';
                        button.disabled = true;
                        button.classList.remove('cyber-button');
                        button.classList.add('bg-gray-600', 'text-gray-300', 'cursor-not-allowed');
                    }
                    
                    giveawaysGrid.appendChild(giveawayCard);
                });
            }
        }

        // Function to render all giveaways on dedicated page
        function renderAllGiveaways() {
            const allGiveawaysGrid = document.getElementById('all-giveaways-grid');
            if (allGiveawaysGrid) {
                allGiveawaysGrid.innerHTML = '';
                // Show ALL giveaways (both active and expired)
                activeGiveaways.forEach(giveaway => {
                    const giveawayCard = createGiveawayCard(giveaway);
                    
                    // Check if user has already entered this giveaway (only for active ones)
                    const timeLeft = giveaway.endTime - new Date();
                    const isExpired = timeLeft <= 0;
                    
                    if (isLoggedIn && !isExpired && userGiveawayEntries.some(entry => entry.name === giveaway.name)) {
                        const button = giveawayCard.querySelector('.giveaway-enter-btn');
                        button.textContent = 'ALREADY ENTERED';
                        button.disabled = true;
                        button.classList.remove('cyber-button');
                        button.classList.add('bg-gray-600', 'text-gray-300', 'cursor-not-allowed');
                    }
                    
                    allGiveawaysGrid.appendChild(giveawayCard);
                });
            }
        }

        // Function to render limited owned games (2 on store page)
        function renderOwnedGames() {
            const ownedGamesGrid = document.getElementById('owned-games-grid');
            if (ownedGamesGrid) {
                ownedGamesGrid.innerHTML = '';
                // Show only first 2 owned games on store page
                const limitedOwnedGames = ownedGames.slice(0, 2);
                limitedOwnedGames.forEach(game => {
                    ownedGamesGrid.appendChild(createOwnedGameCard(game));
                });
            }
        }

        // Function to render all owned games on dedicated page
        function renderAllOwnedGames() {
            const allOwnedGamesGrid = document.getElementById('all-owned-games-grid');
            if (allOwnedGamesGrid) {
                allOwnedGamesGrid.innerHTML = '';
                // Show ALL 8 owned games in library page
                ownedGames.forEach(game => {
                    allOwnedGamesGrid.appendChild(createOwnedGameCard(game));
                });
            }
        }

        // Function to render game fixes videos
        function renderGameFixes() {
            const gameFixesGrid = document.getElementById('game-fixes-grid');
            if (gameFixesGrid) {
                gameFixesGrid.innerHTML = '';
                gameFixVideos.forEach(video => {
                    gameFixesGrid.appendChild(createVideoCard(video));
                });
            }
        }

        // Function to render filtered game fix videos
        function renderGameFixVideos(videos) {
            const gameFixesGrid = document.getElementById('game-fixes-grid');
            if (gameFixesGrid) {
                gameFixesGrid.innerHTML = '';
                if (videos.length === 0) {
                    gameFixesGrid.innerHTML = '<div class="col-span-full text-center py-12"><p class="text-gray-400 text-xl">No fix videos found matching your search.</p><p class="text-gray-500 text-sm mt-2">Try different keywords or browse all available tutorials.</p></div>';
                    return;
                }
                videos.forEach(video => {
                    gameFixesGrid.appendChild(createVideoCard(video));
                });
            }
        }

        // Random video URLs for demo purposes
        const randomVideos = [
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4",
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4",
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4",
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4",
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerMeltdowns.mp4",
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/Sintel.mp4"
        ];

        // User video interactions
        let helpfulVideos = [];
        let savedVideos = [];

        // Video modal functions
        function showVideoModal(videoData) {
            const videoModal = document.getElementById('video-modal');
            const videoContent = document.getElementById('video-content');
            
            // Show modal with loading animation first
            videoContent.innerHTML = `
                <div class="text-center py-16">
                    <div class="loading-text mb-8">LOADING VIDEO...</div>
                    <div class="flex justify-center">
                        <div class="relative w-24 h-24">
                            <svg class="w-24 h-24 transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="#00ffff" stroke-width="4" fill="none" opacity="0.3"/>
                                <circle id="video-progress-circle" cx="50" cy="50" r="40" stroke="#ff00ff" stroke-width="4" fill="none" 
                                        stroke-dasharray="251.2" stroke-dashoffset="251.2" stroke-linecap="round"
                                        style="transition: stroke-dashoffset 0.1s ease;"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span id="video-progress-text" class="text-cyan-400 font-bold text-lg">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            videoModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Animate the circular progress bar
            const progressCircle = document.getElementById('video-progress-circle');
            const progressText = document.getElementById('video-progress-text');
            const circumference = 251.2; // 2 * œÄ * 40
            let progress = 0;
            
            const progressInterval = setInterval(() => {
                progress += 5; // Increment by 5% every 100ms (20 steps = 2 seconds)
                const offset = circumference - (progress / 100) * circumference;
                
                progressCircle.style.strokeDashoffset = offset;
                progressText.textContent = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    
                    // Show the actual video content after loading completes
                    setTimeout(() => {
                        // Get random video URL
                        const randomVideoUrl = randomVideos[Math.floor(Math.random() * randomVideos.length)];
                        
                        videoContent.innerHTML = `
                            <div class="text-center mb-6">
                                <h2 class="text-3xl font-bold font-['Orbitron'] text-cyan-400 mb-2">${videoData.title}</h2>
                                <p class="text-gray-300">${videoData.game} - ${videoData.issue}</p>
                            </div>
                            
                            <!-- Video Player -->
                            <div class="bg-black border-2 border-cyan-500 mb-6 relative aspect-video">
                                <video 
                                    id="video-player" 
                                    class="w-full h-full" 
                                    controls 
                                    preload="metadata"
                                    poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='450' viewBox='0 0 800 450'%3E%3Cdefs%3E%3ClinearGradient id='videoPoster' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23000000;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23ff00ff;stop-opacity:0.3' /%3E%3Cstop offset='100%25' style='stop-color:%2300ffff;stop-opacity:0.3' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='450' fill='url(%23videoPoster)'/%3E%3Ccircle cx='400' cy='225' r='50' fill='%23ff0000' opacity='0.8'/%3E%3Cpolygon points='380,205 380,245 420,225' fill='%23ffffff'/%3E%3Ctext x='400' y='300' text-anchor='middle' fill='%23ffffff' font-family='Arial' font-size='24' font-weight='bold'%3E${videoData.game} Fix Tutorial%3C/text%3E%3Ctext x='400' y='330' text-anchor='middle' fill='%23cccccc' font-family='Arial' font-size='16'%3EDuration: ${videoData.duration} ‚Ä¢ Views: ${videoData.views}%3C/text%3E%3C/svg%3E"
                                >
                                    <source src="${randomVideoUrl}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Problem Description -->
                                <div class="game-card p-6">
                                    <h3 class="text-xl font-bold text-cyan-400 mb-4">üîç Problem Description</h3>
                                    <p class="text-gray-300 mb-4">${videoData.description}</p>
                                    <div class="space-y-2">
                                        <div class="flex justify-between">
                                            <span class="text-gray-400">Game:</span>
                                            <span class="text-white font-semibold">${videoData.game}</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-400">Issue:</span>
                                            <span class="text-white font-semibold">${videoData.issue}</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-400">Views:</span>
                                            <span class="text-cyan-400 font-semibold">${videoData.views}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Solution Overview -->
                                <div class="game-card p-6">
                                    <h3 class="text-xl font-bold text-cyan-400 mb-4">üîß Solution Overview</h3>
                                    <p class="text-gray-300 mb-4">${videoData.solution}</p>
                                    <div class="space-y-3">
                                        <button class="w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white font-['Rajdhani'] font-bold transition-colors mark-helpful-btn" data-video='${JSON.stringify(videoData)}'>
                                            ${helpfulVideos.some(v => v.title === videoData.title) ? '‚úì MARKED AS HELPFUL' : '‚úì MARK AS HELPFUL'}
                                        </button>
                                        <button class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-['Rajdhani'] font-bold transition-colors copy-solution-btn" data-solution="${videoData.solution}">
                                            üìã COPY SOLUTION
                                        </button>
                                        <button class="w-full py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white font-['Rajdhani'] font-bold transition-colors save-later-btn" data-video='${JSON.stringify(videoData)}'>
                                            ${savedVideos.some(v => v.title === videoData.title) ? 'üíæ SAVED' : 'üíæ SAVE FOR LATER'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex justify-center mt-6">
                                <button class="bg-gray-700 hover:bg-gray-600 text-white px-8 py-3 font-['Rajdhani'] text-lg font-bold transition-colors" onclick="hideVideoModal()">
                                    CLOSE
                                </button>
                            </div>
                        `;
                    }, 200);
                }
            }, 100);
        }

        function hideVideoModal() {
            const videoModal = document.getElementById('video-modal');
            const videoPlayer = document.getElementById('video-player');
            
            // Pause video when closing modal
            if (videoPlayer) {
                videoPlayer.pause();
            }
            
            videoModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Video interaction functions
        function markVideoAsHelpful(videoData) {
            if (!isLoggedIn) {
                showNotification('Please log in to mark videos as helpful!', 'error');
                showAuthModal();
                showLoginForm();
                return;
            }

            // Check if already marked as helpful
            const alreadyMarked = helpfulVideos.some(v => v.title === videoData.title);
            if (alreadyMarked) {
                showNotification('Video already marked as helpful!', 'info');
                return;
            }

            // Add to helpful videos
            const helpfulVideo = {
                ...videoData,
                markedDate: new Date().toLocaleDateString(),
                markedTime: new Date().toLocaleTimeString()
            };

            helpfulVideos.push(helpfulVideo);
            showNotification(`${videoData.title} marked as helpful!`, 'success');

            // Update button text in modal
            const markButton = document.querySelector('.mark-helpful-btn');
            if (markButton) {
                markButton.textContent = '‚úì MARKED AS HELPFUL';
                markButton.classList.remove('bg-green-600', 'hover:bg-green-700');
                markButton.classList.add('bg-gray-600', 'cursor-not-allowed');
                markButton.disabled = true;
            }

            // Update account page if currently viewing it
            if (currentPage === 'account') {
                updateHelpfulVideos();
            }
        }

        function saveVideoForLater(videoData) {
            if (!isLoggedIn) {
                showNotification('Please log in to save videos!', 'error');
                showAuthModal();
                showLoginForm();
                return;
            }

            // Check if already saved
            const alreadySaved = savedVideos.some(v => v.title === videoData.title);
            if (alreadySaved) {
                showNotification('Video already saved!', 'info');
                return;
            }

            // Add to saved videos
            const savedVideo = {
                ...videoData,
                savedDate: new Date().toLocaleDateString(),
                savedTime: new Date().toLocaleTimeString()
            };

            savedVideos.push(savedVideo);
            showNotification(`${videoData.title} saved for later!`, 'success');

            // Update button text in modal
            const saveButton = document.querySelector('.save-later-btn');
            if (saveButton) {
                saveButton.textContent = 'üíæ SAVED';
                saveButton.classList.remove('bg-purple-600', 'hover:bg-purple-700');
                saveButton.classList.add('bg-gray-600', 'cursor-not-allowed');
                saveButton.disabled = true;
            }

            // Update account page if currently viewing it
            if (currentPage === 'account') {
                updateSavedVideos();
            }
        }

        function copySolutionToClipboard(solution) {
            // Create a temporary textarea element
            const textarea = document.createElement('textarea');
            textarea.value = solution;
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                document.execCommand('copy');
                showNotification('Solution copied to clipboard!', 'success');
            } catch (err) {
                showNotification('Failed to copy solution. Please copy manually.', 'error');
            }
            
            document.body.removeChild(textarea);
        }

        // Bundle modal functions
        function showBundleModal(bundleData) {
            const bundleModal = document.getElementById('bundle-modal');
            const bundleContent = document.getElementById('bundle-content');
            
            // Show modal with loading animation first
            bundleContent.innerHTML = `
                <div class="text-center py-16">
                    <div class="loading-text mb-8">LOADING BUNDLE...</div>
                    <div class="flex justify-center">
                        <div class="relative w-24 h-24">
                            <svg class="w-24 h-24 transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="#00ffff" stroke-width="4" fill="none" opacity="0.3"/>
                                <circle id="bundle-progress-circle" cx="50" cy="50" r="40" stroke="#ff00ff" stroke-width="4" fill="none" 
                                        stroke-dasharray="251.2" stroke-dashoffset="251.2" stroke-linecap="round"
                                        style="transition: stroke-dashoffset 0.1s ease;"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span id="bundle-progress-text" class="text-cyan-400 font-bold text-lg">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            bundleModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Animate the circular progress bar
            const progressCircle = document.getElementById('bundle-progress-circle');
            const progressText = document.getElementById('bundle-progress-text');
            const circumference = 251.2; // 2 * œÄ * 40
            let progress = 0;
            
            const progressInterval = setInterval(() => {
                progress += 5; // Increment by 5% every 100ms (20 steps = 2 seconds)
                const offset = circumference - (progress / 100) * circumference;
                
                progressCircle.style.strokeDashoffset = offset;
                progressText.textContent = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    
                    // Show the actual bundle content after loading completes
                    setTimeout(() => {
                        bundleContent.innerHTML = `
                            <h2 class="text-2xl font-bold font-['Orbitron'] text-cyan-400 mb-4">${bundleData.title}</h2>
                            <div class="mb-4">
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="text-2xl font-bold text-green-400">${bundleData.price}</span>
                                    ${bundleData.originalPrice ? `<span class="text-gray-300 line-through text-lg">${bundleData.originalPrice}</span>` : ''}
                                    <span class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-2 py-1 rounded-full text-sm font-bold">${bundleData.discount}</span>
                                </div>
                                <div class="text-yellow-400 mb-4">${bundleData.rating}</div>
                            </div>
                            <div class="mb-6">
                                <h3 class="text-lg font-bold text-cyan-300 mb-3">üì¶ Games Included (${bundleData.games.length})</h3>
                                <div class="space-y-2 max-h-64 overflow-y-auto pr-2" style="scrollbar-width: thin; scrollbar-color: #00ffff #1a1a2e;">
                                    ${bundleData.games.map(game => `
                                        <div class="flex items-center space-x-3 p-3 bg-black bg-opacity-30 rounded border border-gray-700">
                                            <div class="w-8 h-8 bg-gradient-to-br from-cyan-500 to-purple-500 rounded flex items-center justify-center">
                                                <span class="text-white font-bold text-sm">üéÆ</span>
                                            </div>
                                            <span class="text-white font-semibold">${game}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="flex space-x-3">
                                <button class="cyber-button flex-1 py-3 font-['Rajdhani'] text-lg font-bold buy-bundle-btn" data-bundle='${JSON.stringify(bundleData)}'>
                                    BUY BUNDLE
                                </button>
                                <button class="bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 font-bold transition-colors" id="close-bundle-modal-btn">
                                    CLOSE
                                </button>
                            </div>
                        `;
                    }, 200);
                }
            }, 100);
        }

        function hideBundleModal() {
            const bundleModal = document.getElementById('bundle-modal');
            bundleModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Add interactive effects
        document.addEventListener('click', function(e) {
            
            // Handle giveaway entry
            if (e.target.classList.contains('giveaway-enter-btn')) {
                const giveawayName = e.target.getAttribute('data-giveaway');
                handleGiveawayEntry(giveawayName);
            }
            
            // Handle bundle card click
            if (e.target.classList.contains('bundle-card-btn') || e.target.closest('.bundle-card-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('bundle-card-btn') ? e.target : e.target.closest('.bundle-card-btn');
                try {
                    const bundleData = JSON.parse(button.getAttribute('data-bundle'));
                    showBundleModal(bundleData);
                } catch (error) {
                    console.error('Error parsing bundle data:', error);
                }
            }
            
            // Handle BUY NOW button click
            if (e.target.classList.contains('buy-now-btn') || e.target.closest('.buy-now-btn')) {
                e.preventDefault();
                e.stopPropagation();
                
                // Show circular loading progress bar for 2 seconds
                showCircularLoading();
                
                setTimeout(() => {
                    // Check if user is logged in
                    if (!isLoggedIn) {
                        showNotification('Please log in to purchase games!', 'error');
                        showAuthModal();
                        showLoginForm();
                        return;
                    }
                    
                    const button = e.target.classList.contains('buy-now-btn') ? e.target : e.target.closest('.buy-now-btn');
                    try {
                        const gameData = JSON.parse(button.getAttribute('data-game'));
                        addToCart(gameData);
                    } catch (error) {
                        console.error('Error parsing game data:', error);
                    }
                }, 2200);
            }
            
            // Handle BUY BUNDLE button click
            if (e.target.classList.contains('buy-bundle-btn') || e.target.closest('.buy-bundle-btn')) {
                e.preventDefault();
                e.stopPropagation();
                
                // Check if user is logged in
                if (!isLoggedIn) {
                    showNotification('Please log in to purchase bundles!', 'error');
                    showAuthModal();
                    showLoginForm();
                    return;
                }
                
                const button = e.target.classList.contains('buy-bundle-btn') ? e.target : e.target.closest('.buy-bundle-btn');
                try {
                    const bundleData = JSON.parse(button.getAttribute('data-bundle'));
                    addToCart(bundleData);
                    hideBundleModal(); // Close the modal after adding to cart
                } catch (error) {
                    console.error('Error parsing bundle data:', error);
                }
            }
            
            // Handle cart item removal
            if (e.target.classList.contains('remove-cart-item') || e.target.closest('.remove-cart-item')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('remove-cart-item') ? e.target : e.target.closest('.remove-cart-item');
                const itemId = parseFloat(button.getAttribute('data-item-id'));
                removeFromCart(itemId);
            }
            
            // Handle favorite button click
            if (e.target.classList.contains('favorite-btn') || e.target.closest('.favorite-btn')) {
                e.preventDefault();
                e.stopPropagation();
                
                // Check if user is logged in
                if (!isLoggedIn) {
                    showNotification('Please log in to add games to favorites!', 'error');
                    showAuthModal();
                    showLoginForm();
                    return;
                }
                
                const button = e.target.classList.contains('favorite-btn') ? e.target : e.target.closest('.favorite-btn');
                try {
                    const gameData = JSON.parse(button.getAttribute('data-game'));
                    const isFavorite = favoriteGames.some(fav => fav.title === gameData.title);
                    
                    if (isFavorite) {
                        removeFromFavorites(gameData.title);
                    } else {
                        addToFavorites(gameData);
                    }
                } catch (error) {
                    console.error('Error parsing game data:', error);
                }
            }
            
            // Handle game settings button click
            if (e.target.classList.contains('game-settings-btn') || e.target.closest('.game-settings-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('game-settings-btn') ? e.target : e.target.closest('.game-settings-btn');
                try {
                    const gameData = JSON.parse(button.getAttribute('data-game'));
                    showGameSettingsModal(gameData);
                } catch (error) {
                    console.error('Error parsing game data:', error);
                }
            }
            
            // Handle remove favorite button click
            if (e.target.classList.contains('remove-favorite-btn') || e.target.closest('.remove-favorite-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('remove-favorite-btn') ? e.target : e.target.closest('.remove-favorite-btn');
                const gameTitle = button.getAttribute('data-game-title');
                removeFromFavorites(gameTitle);
            }
            
            // Handle watch video button click
            if (e.target.classList.contains('watch-video-btn') || e.target.closest('.watch-video-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('watch-video-btn') ? e.target : e.target.closest('.watch-video-btn');
                try {
                    const videoData = JSON.parse(button.getAttribute('data-video'));
                    showVideoModal(videoData);
                } catch (error) {
                    console.error('Error parsing video data:', error);
                }
            }
            
            // Handle mark as helpful button click
            if (e.target.classList.contains('mark-helpful-btn') || e.target.closest('.mark-helpful-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('mark-helpful-btn') ? e.target : e.target.closest('.mark-helpful-btn');
                try {
                    const videoData = JSON.parse(button.getAttribute('data-video'));
                    markVideoAsHelpful(videoData);
                } catch (error) {
                    console.error('Error parsing video data:', error);
                }
            }
            
            // Handle save for later button click
            if (e.target.classList.contains('save-later-btn') || e.target.closest('.save-later-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('save-later-btn') ? e.target : e.target.closest('.save-later-btn');
                try {
                    const videoData = JSON.parse(button.getAttribute('data-video'));
                    saveVideoForLater(videoData);
                } catch (error) {
                    console.error('Error parsing video data:', error);
                }
            }
            
            // Handle copy solution button click
            if (e.target.classList.contains('copy-solution-btn') || e.target.closest('.copy-solution-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('copy-solution-btn') ? e.target : e.target.closest('.copy-solution-btn');
                const solution = button.getAttribute('data-solution');
                copySolutionToClipboard(solution);
            }
            
            // Handle watch saved video button click
            if (e.target.classList.contains('watch-saved-video-btn') || e.target.closest('.watch-saved-video-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('watch-saved-video-btn') ? e.target : e.target.closest('.watch-saved-video-btn');
                try {
                    const videoData = JSON.parse(button.getAttribute('data-video'));
                    showVideoModal(videoData);
                } catch (error) {
                    console.error('Error parsing video data:', error);
                }
            }
            
            // Handle remove saved video button click
            if (e.target.classList.contains('remove-saved-video-btn') || e.target.closest('.remove-saved-video-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('remove-saved-video-btn') ? e.target : e.target.closest('.remove-saved-video-btn');
                const videoTitle = button.getAttribute('data-video-title');
                removeSavedVideo(videoTitle);
            }
            
            // Handle download button click
            if (e.target.classList.contains('download-btn') || e.target.closest('.download-btn')) {
                e.preventDefault();
                e.stopPropagation();
                const button = e.target.classList.contains('download-btn') ? e.target : e.target.closest('.download-btn');
                const platform = button.getAttribute('data-platform');
                handleDownload(platform);
            }
            
            // Handle Play Store button click
            if (e.target.classList.contains('playstore-btn') || e.target.closest('.playstore-btn')) {
                e.preventDefault();
                e.stopPropagation();
                handleStoreRedirect('playstore');
            }
            
            // Handle Microsoft Store button click
            if (e.target.classList.contains('microsoft-store-btn') || e.target.closest('.microsoft-store-btn')) {
                e.preventDefault();
                e.stopPropagation();
                handleStoreRedirect('microsoft');
            }
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'996f02d09770c51e',t:'MTc2MTg3MDI4My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>